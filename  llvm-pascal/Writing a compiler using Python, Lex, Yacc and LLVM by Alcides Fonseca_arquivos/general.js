var Dsq;if(typeof Dsq=="undefined"){Dsq={}}Dsq.CommentsHandler=function(f,g,b,d,e,c,i){var a=Dsq.Templates.prependPost(b);var h=Dsq.Templates.appendPost(b);d=d.replace(Dsq.POST_RE,Dsq.PostHandler);Dsq.Templates.postLoopCounter++;g=Dsq.Templates.Filters.commentContainer(b,g);return a+g+d+e+h};Dsq.PostHandler=function(m,f,d,k,c,i,a,g,e,o){var h=Dsq.Templates.postPrependHeader(d);var n=Dsq.Templates.postAppendHeader(d);var l=Dsq.Templates.preBody(d);var j=Dsq.Templates.postBody(d);var b=Dsq.Templates.postFooter(d);a=a.replace(Dsq.POST_BODY_RE,Dsq.PostBodyHandler);return f+h+k+n+c+i+l+a+j+g+b};Dsq.PostBodyHandler=function(g,c,b,e,a,f,d){e=Dsq.Templates.Filters.commentContent(b,e);return c+e+a};Dsq.MediaPostHandler=function(d,a,c,b){a=a.split(" ");if(a[0]=="seesmic"){return"<br />"+Dsq.Templates.mediaSeesmic(a[1],a[2])}return""};var Dsq;if(typeof Dsq=="undefined"){Dsq={}}Dsq.Validators=function(){this.VALID_EMAIL_RE=/^[a-z0-9\-\_\+]+(\.[a-z0-9\-\_\+]+)*\@(([a-z0-9\-\_\+]+(\.[a-z0-9\-\_\+]+)*)+\.[a-z]{2,}|([0-9]+\.){3}[0-9]+)$/i;this.name=function(b){var a=false;if(typeof Dsq.Templates.placeholder!=="undefined"&&b==Dsq.Templates.placeholder.name){a=true}if(b.length<=1){a=true}if(a){return Dsq.Strings.get("Please enter a name to comment.")}else{return true}};this.email=function(a){if(Dsq.Validators.VALID_EMAIL_RE.test(a)){return true}else{return Dsq.Strings.get("Please enter a valid email to comment.")}};this.url=function(a){if(!a||a.indexOf(".")!=-1){return true}else{return Dsq.Strings.get("Please check your website URL (this field is optional).")}};this.validate=function(b,a){a=a||function(f){alert(f)};for(var e=0;e<b.length;e++){var c=b[e];var d=c.validator(c.value);if(d!==true){a(d);return false}}return true}};Dsq.Validators=new Dsq.Validators();var Dsq;if(typeof Dsq==="undefined"){Dsq={}}Dsq.$=function(a){return document.getElementById(a)};Dsq.$b=document.body||document.getElementsByTagName("body")[0];Dsq.Utils=function(){this.gebiFromElementCollectionCache={};this._styleSheet=null;this.browser={ie:/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent),ie6:(!window.XMLHttpRequest)?true:false,ie7:(document.all&&!window.opera&&window.XMLHttpRequest)?true:false,webkit:navigator.userAgent.indexOf("AppleWebKit/")>-1,opera:(window.opera)?true:false,gecko:navigator.userAgent.indexOf("Gecko/")>-1};this.gebiFromElement=function(d,g,b){var f;if(!this.browser.ie){return Dsq.$(g)}else{var e=d.id+"-"+b;b=b||"div";if(typeof this.gebiFromElementCollectionCache[e]!="undefined"){f=this.gebiFromElementCollectionCache[e]}else{f=d.getElementsByTagName(b);this.gebiFromElementCollectionCache[e]=f}for(var c=0;c<f.length;c++){if(f[c].id==g){return f[c]}}return null}};this.execOnReady=function(d){var c=document.createElement("document:ready");try{c.doScroll("left");d();c=null}catch(b){setTimeout(function(){Dsq.Utils.execOnReady(d)},10)}};this.createCookie=function(b,c){document.cookie=b+"="+c+"; path=/"};this.readCookie=function(d){var f=d+"=";var b=document.cookie.split(";");for(var e=0;e<b.length;e++){var g=b[e];while(g.charAt(0)==" "){g=g.substring(1,g.length)}if(g.indexOf(f)===0){return g.substring(f.length,g.length)}}return null};this.eraseCookie=function(c){var b=new Date();b.setTime(b.getTime()+(-1*24*60*60*1000));document.cookie=c+"=;expires="+b.toGMTString()+"; path=/"};this.deleteNode=function(b){if(b){this.deleteChildren(b);if(typeof b.outerHTML!="undefined"){b.outerHTML=""}else{if(b.parentNode){b.parentNode.removeChild(b)}}b=null}};this.deleteChildren=function(d){if(d){for(var b=d.childNodes.length-1;b>=0;b--){var c=d.childNodes[b];if(c.hasChildNodes()){this.deleteChildren(c)}if(typeof c.outerHTML!="undefined"){c.outerHTML=""}else{d.removeChild(c)}c=null}}};this.findPos=function(c){var d=0;var b=0;if(c.offsetParent){do{d+=c.offsetLeft;b+=c.offsetTop}while((c=c.offsetParent))}return[d,b]};this.getWindowSize=function(){var b=-1;var c=-1;if(typeof(window.innerWidth)=="number"){b=window.innerWidth;c=window.innerHeight}else{if(document.documentElement){b=document.documentElement.clientWidth||document.body.clientWidth;c=document.documentElement.clientHeight||document.body.clientHeight}}return[b,c]};this.getScrollPos=function(){var b,c;if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollWidth)){b=document.documentElement.scrollWidth;c=document.documentElement.scrollTop||document.body.scrollTop}else{if(document.body.scrollTop&&document.body.scrollWidth){b=document.body.scrollWidth;c=document.body.scrollTop}}return[b,c]};this.addEventListener=function(c,d,e){var b=e;if(c.addEventListener){c.addEventListener(d,b,false)}else{if(c.attachEvent){b=function(){e(window.event)};c.attachEvent("on"+d,b)}else{throw new Error("Event registration not supported")}}return{instance:c,name:d,listener:b}};this.removeEventListener=function(c){var b=c.instance;if(b.removeEventListener){b.removeEventListener(c.name,c.listener,false)}else{if(b.detachEvent){b.detachEvent("on"+c.name,c.listener)}}};this.fixIframesIE=function(f){var c=Dsq.$(disqus_container_id);var e=c.getElementsByTagName("iframe");var b=(f?Dsq.$(f):Dsq.$("dsq-content"));if(b){for(var d=0;d<e.length;d++){e[d].style.width=b.offsetWidth}}};this.getElementsByClassName=function(c,g,b){var f=(g=="*"&&c.all)?c.all:c.getElementsByTagName(g);var j=[];b=b.replace(/\-/g,"\\-");var h=new RegExp("(^|\\s)"+b+"(\\s|$)");var e;for(var d=0;d<f.length;d++){e=f[d];if(h.test(e.className)){j.push(e)}}return(j)};this.postToUrl=function(d,h,c){var g=document.createElement("form");var f=document.createElement("div");var i="dsq-temp-iframe-"+(new Date()).getTime();g.method="POST";g.action=d;if(!c){g.target=i}f.innerHTML='<iframe style="display:none" name="'+i+'" id="'+i+'"></iframe>';for(var e in h){if(h.hasOwnProperty(e)){var b=document.createElement("input");b.name=e;b.type="hidden";b.value=h[e];g.appendChild(b)}}Dsq.$b.appendChild(f);Dsq.$b.appendChild(g);g.submit()};this.extractId=function(c){var d=c.id.split("-");if(d.length<=1){return 0}else{var b=parseInt(d[d.length-1],10);return !isNaN(b)?b:null}};this.getStyle=function(c,b){var d;if(c.currentStyle){d=c.currentStyle[b]}else{if(window.getComputedStyle){d=document.defaultView.getComputedStyle(c,null).getPropertyValue(b)}}if(d=="transparent"||d===""){return this.getStyle(c.parentNode,b)}else{return d}};this.execScript=function(f,b,c){var d=document.createElement("script");b=typeof b=="undefined"?true:b;c=c||Dsq.container;if(b){var e=(f.indexOf("?")>=0)?"&":"?";f+=e+(new Date()).getTime()}d.type="text/javascript";d.charset="UTF-8";d.src=f;c.appendChild(d);return d};this.pluralize=function(c,d,b){return(c!=1)?b||"s":d||""};this.getRequestParams=function(f){var d,b;var e={};f=f||window.location.search.substring(1);d=f.split("&");for(var c=0;c<d.length;c++){b=d[c].split("=");e[b[0]]=(b[1]||true)}return e};this.loadStylesheet=function(b){if(b.indexOf("http")!==0){b=Dsq.jsonData.settings.media_url+b}var c=document.getElementsByTagName("head")[0];if(!c){c=document.getElementById("disqus_thread")}var d=document.createElement("link");d.rel="stylesheet";d.type="text/css";d.href=b;c.appendChild(d)};this.addCssRule=function(b,h,d){d=d||0;if(!DsqCache.inlineStylesheet){throw new ReferenceError("An element for inline styles was not created")}var g=DsqCache.inlineStylesheet;if(g.insertRule){var c=b+" { "+h+" }";if(d==-1){d=g.cssRules.length}g.insertRule(c,d)}else{if(g.addRule){var f=b.split(",");for(var e=0;e<f.length;e++){g.addRule(f[e],h,d)}}}};this.forEachIn=function(c,d){for(var b in c){if(c.hasOwnProperty(b)){d(b,c[b])}}};this._interpolateGlobalContext={profile_url:Dsq.Urls.REQUEST_USER_PROFILE,disqus_url:Dsq.jsonData.settings.disqus_url,media_url:Dsq.jsonData.settings.media_url,request_username:Dsq.jsonData.request.username,request_display_username:Dsq.jsonData.request.display_username,forum_name:Dsq.jsonData.forum.name};this.renderFromContextStack=function(c,d){for(var b=0;b<d.length;b++){if(d[b][c]!==undefined){return String(d[b][c])}}throw new Error("key "+c+" not found in context")};var a=this;this.interpolate=function(b,d){var c=[d||{},a._interpolateGlobalContext];return b.replace(/%\(\w+\)s/g,function(e){return a.renderFromContextStack(e.slice(2,-2),c)})};this.stripTags=function(b){return b.replace(/(<([^>]+)>)/g,"")};this.assert=function(c){if(!c){throw new Error("Assertion error.")}};this.getFileDirectory=function(b,c){var e,d;if(c===undefined){c="uploads"}if(b>=32117){e=b/10000;d=b%10000;return Dsq.jsonData.settings.media_url+"/"+c+"/users/"+e+"/"+d}else{return Dsq.jsonData.settings.media_url+"/"+c+"/users/"+b}};this.updateJsonData=function(e,c){for(var d=0;d<c.length;d++){var b=c[d];if(typeof Dsq.jsonData[b]!="undefined"){for(var f in e[b]){if(e[b].hasOwnProperty(f)){Dsq.jsonData[b][f]=e[b][f]}}}}};this.compileString=function(b){if(typeof(b)=="string"){return b}if(typeof(b.length)!="number"){throw new TypeError()}if(b.length>0){return b.join("\n")}else{return""}}};Dsq.Utils=new Dsq.Utils();Dsq.$s=Dsq.Utils.compileString;var Dsq;if(typeof Dsq==="undefined"){Dsq={}}Dsq.Popup=function(){this.timeHide=[];this.timeShow=[];this.activePopup={};this.profileCache={};this.statusCache={};this.showTimer=function(a){clearTimeout(this.timeHide[a]);if(!Dsq.Popup.profileIsOn&&!Dsq.Thread.adminIsOn){this.timeShow[a]=setTimeout('Dsq.Popup.popProfile("'+a+'")',400)}};this.hideTimer=function(a){clearTimeout(this.timeShow[a])};this.updateProfile=function(h){if(this.statusCache[h]){var k=Dsq.$("dsq-profile-status-"+h);k.innerHTML=this.statusCache[h];k.style.display="block"}if(this.profileCache[h]){var e=this.profileCache[h];var n=function(i,o){return'<span class="dsq-profile-stat-'+i+'"><big>'+o+"</big></span>"};var m=n("comments",Dsq.FmtStrings.NUMBER_OF_COMMENTS(e.comments_count));var a=n("liked",Dsq.FmtStrings.NUMBER_OF_LIKES(e.likes_count));var d=n("points",Dsq.FmtStrings.NUMBER_OF_POINTS(e.points));var l=Dsq.$("dsq-popup-profile-user-stats-"+h);l.innerHTML="";if(Dsq.jsonData.users[h].registered){l.innerHTML=m+a}l.innerHTML+=d;var c="";for(var g=0;g<e.active_sites.length;g++){var f=e.active_sites[g];c+='<li><a href="'+f.url+'"> <img src="'+f.favicon+'"/ width="16" height="16"/></a> <a href="'+f.url+'">'+f.name+"</a></li>"}if(c!==""){Dsq.$("dsq-popup-profile-active-sites-"+h).innerHTML=c}else{Dsq.$("dsq-popup-profile-active-sites-"+h).innerHTML=Dsq.Strings.get("This site.")}var j="";for(g=0;g<e.moderated_sites.length;g++){var b=e.moderated_sites[g];j+='<li><a href="'+b.url+'"> <img src="'+b.favicon+'"/ width="16" height="16"/></a> <a href="'+b.url+'">'+b.name+"</a></li>"}if(j!==""){Dsq.$("dsq-popup-profile-moderated-"+h).innerHTML=j}else{Dsq.$("dsq-popup-profile-moderated-wrapper-"+h).innerHTML=""}}Dsq.Popup.position()};this.showCookieMsgs=function(){var c="";var a="";var b=0;Dsq.Utils.forEachIn(Dsq.jsonData.cookie_messages,function(d,f){if(!f){return}switch(d){case"post_twitter":if(f==="error"){c="Twitter Error!";a+='<li id="dsq-msg-twitter-error">Oops, we couldn\'t tweet this comment. Please check your <a href="'+Dsq.jsonData.settings.disqus_url+'/account/services">account settings</a>.</li>'}else{var g=f.split(":");c="Tweeted!";a+='<li id="dsq-msg-twitter-success">Your comment was successfully tweeted. <a href="http://twitter.com/'+g[0]+"/status/"+g[1]+'">Click here to view the tweet</a>.</li>'}break;case"post_not_approved":c="Comment awaiting approval by a moderator";a+='<li id="dsq-msg-post-not-approved">'+(Dsq.jsonData.request.missing_perm=="verify"?'You must finish verifying your <span class="logo-disqus">Disqus</span> Profile email address in order for your comment to appear here.<br /><br /><a href="'+Dsq.jsonData.settings.disqus_url+Dsq.Urls.VERIFY_EMAIL+'">Click here to verify your email address</a>.':"Your comment must be approved by a moderator before appearing here.</li>");break;case"post_has_profile":c="Use your existing commenter profile";a+='<li id="dsq-msg-post-has-profile">You have just posted your commment as a <span class="dsq-badge-guest">Guest</span>, but you may already have a <span class="logo-disqus">Disqus</span> Profile.<br /><br /><a href="'+Dsq.jsonData.settings.disqus_url+'/claim">Log in and claim this comment!</a></li>';break;case"user_created":var e=f.split(":");c="Profile created!";a+='<li id="dsq-msg-user-created">You have just created a <span class="logo-disqus">Disqus</span> Profile, the best way to claim, manage, and track your comments all over the web. <br /><br />A confirmation is being sent to <strong>'+e[1]+'</strong>. Please check for this email in order to verify your profile. <ul class="dsq-list-tick"> <li>Your username is <strong>'+e[0]+'</strong>. <a href="'+Dsq.jsonData.settings.disqus_url+"/people/"+e[0]+'/" target="_blank">Click here to view your public profile</a>.</li> <li>Be sure to set your profile picture, as well as connect your <span class="dsq-badge-facebook">Facebook</span> and <span class="dsq-badge-twitter">Twitter</span> accounts. <a href="'+Dsq.jsonData.settings.disqus_url+'/account/" target="_blank">Click here for account settings</a>.</li> </ul> </li>';break;default:break}b++});if(b>1){a='<ul class="dsq-list-bluebullet">'+a;a+="</ul>";c="Thanks for posting!"}if(b>0){if(typeof(disqus_cookie_msgs)=="function"){disqus_cookie_msgs(a,c)}else{Dsq.Popup.popModal(a,c)}}};this.helpBadges=function(a){var b='<ul class="dsq-popup-help"> <li><span class="dsq-badge dsq-badge-verified">Verified</span> has a <span class="logo-disqus">Disqus</span> Profile with a confirmed email address.</li> <li><span class="dsq-badge dsq-badge-registered">Registered</span> has a <span class="logo-disqus">Disqus</span> Profile, but has not yet confirmed his or her email address.</li> <li><span class="dsq-badge dsq-badge-guest">Guest</span> is not logged in with any account and has not claimed his or her comments.</li> <li class="dsq-help-otheraccts">Other accounts</li> <li><span class="dsq-badge dsq-badge-facebook">Facebook</span> is using his or her Facebook profile via Facebook Connect.</li> <li><span class="dsq-badge dsq-badge-twitter">Twitter</span> is using his or her Twitter profile via Twitter Sign-in.</li> <li><span class="dsq-badge dsq-badge-openid">OpenID</span> is using his or her OpenID.</li> </ul>';this.popModal(b,"Help: Types of Commenters",a);return};this.helpLogin=function(){var a='<p>In order to properly log you in, your browser needs to accept cookies from all domains.</p> <p>Open up Settings > Privacy. Then, make sure <strong>Accept cookies from sites</strong> is checked. Also, make sure <strong>Accept third-party cookies</strong> is checked as well.</p> <p>After closing your settings, you may try logging in again.</p> <p>Optional: If you would rather add an exception just for Disqus, click "Exceptions..." and add disqus.com as an allowed domain.</p>';this.popModal(a,"Help: Enabling cookies")};this.permalink=function(b){var c="Link to this comment";var a="<strong>You are anchored to</strong>:<br />"+document.location.protocol+"//"+document.location.host+document.location.pathname+document.location.search+"#comment-"+b;this.popModal(a,c,b)};this.login=function(e,c){var d=e||"Login or Register";var a=c||"";a+=Dsq.Templates.frameLogin({id:"dsq-popup-login"});a+="</iframe>";this.popModal(a,d,null,true,"dsq-popup-login")};this.blacklist=function(e){var c=Dsq.jsonData.posts[e];var a=Dsq.jsonData.users[c.user_key];var d="Add to Blacklist";var b="Adding this person to the blacklist will block him or her from commenting on this site. Check the following types that you would like to add to the blacklist:"+(a.registered?'<div class="dsq-blacklist-option"> <input id="dsq-blacklist-username" type="checkbox" checked> <label for="dsq-blacklist-username"><strong>Username</strong>: '+a.username+"</label> </div>":"")+(c.email?'<div class="dsq-blacklist-option"> <input id="dsq-blacklist-email" type="checkbox" checked> <label for="dsq-blacklist-email"><strong>Email address</strong>: '+c.email+"</label> </div>":"")+'<div class="dsq-blacklist-option"> <input id="dsq-blacklist-ip" type="checkbox" onclick="Dsq.$(\'dsq-blacklist-ip-warning\').style.display=\'block\'"> <label for="dsq-blacklist-ip"><strong>IP address</strong>: '+c.ip+"</label> </div>";b+='<p id="dsq-blacklist-ip-warning" style="display:none"> Note: Blocking this person\'s IP address may also unintentionally prevent others, who share his/her IP address, from commenting on this site. This may include people who are sharing the same computer, living in the same house, or using the same Internet provider. Only block an IP address as a last resort. </p>';b+='<p style="text-align:center"><button type="button" onclick="Dsq.Post.blockUser('+e+"); this.disabled=true; this.innerHTML='Just one moment...'\">Add to Blacklist</button></p>";Dsq.Popup.popModal(b,d)};this.remoteAccountSettings=function(){var a="";var d={};var c=Dsq.jsonData.settings.disqus_url+Dsq.Urls.REMOTE_SETTINGS;var b={id:"dsq-popup-account-settings"};if(typeof disqus_frame_theme!="undefined"){d.theme=disqus_frame_theme}a=Dsq.Templates._frameGeneric(c,d,b);a+="</iframe>";this.popModal(a,"Account Settings",null,true,"dsq-popup-account-settings")};this.popModal=function(e,f,d,h,c){var b=document.createElement("div");var g,a;Dsq.Popup._closePopup(null,true);if(typeof(f)=="undefined"){f=""}if(typeof(h)=="undefined"){h=true}if(d){b.id="dsq-popup-message-"+d}else{b.id="dsq-popup-message"}g=f;a=e;b.innerHTML=Dsq.Templates.popupModal(g,a);Dsq.Popup.initPopup(b,d,"message",c);if(h){Dsq.Popup.popupListener=Dsq.Utils.addEventListener(document,"mouseup",Dsq.Popup._closePopup)}};this.popAlert=this.popModal;this.loading=function(b){var c=Dsq.Strings.get("Just a moment...");var a='<div style="text-align:center; padding: 5px 0 10px 0"><img src="'+Dsq.jsonData.settings.media_url+'/images/loading.gif" alt="" /></div>';Dsq.Popup.lightbox(a,c,b)};this.lightbox=function(c,d,b){var a=document.createElement("div");a.id="dsq-overlay";a.className="dsq-overlay";Dsq.$b.appendChild(a);Dsq.Popup.popModal(c,d,b,false,"dsq-lightbox")};this.popProfile=function(d,f){var e=Dsq.jsonData.posts[d];if(e&&e.has_been_anonymized){Dsq.Popup.popModal("This message was anonymized by its previous owner.","Anonymized",d);return}if(d){f=Dsq.jsonData.posts[d].user_key}var a=Dsq.jsonData.users[f];var c="dsq-popup-profile-"+f;var b=document.createElement("div");if(this.activePopup.el){this._closePopup(null,true);if(this.activePopup.linkClicked){this.activePopup.linkClicked=false;return}}b.id=c;b.innerHTML=Dsq.Templates.popupProfile(f);this.initPopup(b,d,"profile");this.popupListener=Dsq.Utils.addEventListener(document,"mouseup",this._closePopup);if(!this.profileCache[f]){Dsq.Utils.execScript(Dsq.jsonData.settings.disqus_url+Dsq.Urls.EMBED_PROFILE+"?username="+f+"&anon="+(a.registered?0:1)+"&f="+Dsq.jsonData.request.forum)}else{this.updateProfile(f)}};this._closePopup=function(f,d){var g=Dsq.Popup.activePopup.el;var h=Dsq.Popup.activePopup.id;var c="dsq-avatar-"+h;if(!g){return}if(d||!Dsq.Popup.isClicked(f,g.id)){if(Dsq.Popup.popupListener){Dsq.Utils.removeEventListener(Dsq.Popup.popupListener)}var b=Dsq.$("dsq-overlay");if(b){Dsq.Utils.deleteNode(b)}try{Dsq.Utils.deleteNode(g)}catch(a){g.parentNode.removeChild(g)}Dsq.Popup.activePopup={}}if(!d&&Dsq.Popup.isClicked(f,c)){Dsq.Popup.activePopup.linkClicked=true}};this.initPopup=function(a,c,d,b){a.className="dsq-popup dsq-popup-"+d+" "+(b?b:"");if(Dsq.Utils.browser.ie6||Dsq.Utils.browser.ie7){Dsq.Utils.execOnReady(function(){Dsq.$b.appendChild(a)})}else{Dsq.$b.appendChild(a)}a.style.display="block";Dsq.Popup.activePopup={el:a,id:c,type:d,linkClicked:false};Dsq.Popup.position()};this.position=function(){if(!Dsq.Popup.activePopup){return false}var a=Dsq.Popup.activePopup.el;var c=(Dsq.Utils.getWindowSize()[0]-a.offsetWidth)/2;var b=(Dsq.Utils.getWindowSize()[1]-a.offsetHeight)/2;if(Dsq.Utils.browser.ie6){b+=Dsq.Utils.getScrollPos()[1]}a.style.left=c+"px";a.style.top=b+"px";return true};this.isClicked=function(b,c){var a=b.target||b.srcElement;while(a&&a.parentNode){if(a.id==c){return true}a=a.parentNode}return false}};Dsq.Popup=new Dsq.Popup();var Dsq;if(typeof Dsq==="undefined"){Dsq={}}Dsq.Templates=function(){this.postLoopCounter=0;this.filters={};this.addPostContainer="dsq-post-add";this.textareaContainer="dsq-post-add";this.registerTemplate=function(a,b){this["$$_"+a]=b;if(typeof DsqLocal.Filters!="undefined"&&typeof DsqLocal.Filters[a]=="function"){this.filters[a]=this.filters[a]||[];this.filters[a].push(DsqLocal.Filters[a])}this[a]=function(){var d;if(typeof DsqLocal.Templates!="undefined"&&typeof DsqLocal.Templates[a]=="function"){d=DsqLocal.Templates[a].apply(this,arguments)}if(d===undefined){d=this["$$_"+a].apply(this,arguments)}if(this.filters[a]){var c=[d];c.push.apply(c,arguments);for(var e=0;e<this.filters[a].length;e++){d=this.filters[a][e].apply(this,c)}}return d}};this.registerFilter=function(a,b){this.filters[a]=this.filters[a]||[];this.filters[a].push(b)};this.Filters=function(){this.commentContainer=function(a,c){var d=Dsq.jsonData.posts[a];var b="";if(Dsq.jsonData.request.page>1){b+="dsq-append"}if(d.depth){b+=" dsq-comment child dsq-depth-"+d.depth+" dsq-parent-is-"+d.parent_post_id}if(d.author_is_creator){b+=" special dsq-special"}if(d.author_is_moderator){b+=" dsq-moderator"}b+=(Dsq.Templates.postLoopCounter%2===0)?" dsq-even":" dsq-odd";c=c.substring(0,c.lastIndexOf(">"));return c+' class="dsq-comment '+b+'" style="margin-left:'+d.depth*30+'px">'};this.commentContent=function(a,b){var c=Dsq.jsonData.posts[a];if(c.killed){return"<em>"+Dsq.Strings.get("Comment removed.")+"</em>"}else{if(!c.approved){return"<em>"+Dsq.Strings.get("This comment was flagged for review.")+"</em>"}}b=b.replace(Dsq.MEDIA_POST_RE,Dsq.MediaPostHandler);return b}};this.authPost=function(){if(!Dsq.jsonData.context.show_reply){return""}var a=[];a=a.concat(['<div id="dsq-auth"',Dsq.jsonData.integration.reply_position?'class="dsq-auth-bottom"':"",">",'<div class="dsq-by">','<a href="http://disqus.com" target="_blank">',(Dsq.jsonData.integration.disqus_logo?Dsq.Utils.interpolate('<img src="%(media_url)s/images/embed/by-disqus.png" alt="discussion by DISQUS">'):Dsq.Utils.interpolate('<img src="%(media_url)s/images/embed/dsq-button-120x19.png" alt="discussion by DISQUS">')),"</a>","</div>",'<div class="dsq-auth-header">','<h3 id="dsq-add-new-comment" class="dsq-h3-addcomment">',Dsq.Strings.get("Add New Comment"),"</h3>",'<div id="dsq-login">',(!Dsq.jsonData.request.is_authenticated&&Dsq.jsonData.forum.allow_anon_post?'<p class="dsq-login-message" id="dsq-login-message">You are commenting as a <a class="dsq-help" title="Click for more information" href="#" onclick="Dsq.Popup.helpBadges(); return false">Guest</a>. You may '+(Dsq.jsonData.context.use_fb_connect||Dsq.jsonData.use_twitter_signin||Dsq.jsonData.use_openid?"select one to":"")+"log into:</p>":"")]);if(!Dsq.jsonData.request.is_authenticated){a=a.concat([Dsq.Utils.interpolate('<a id="dsq-login-toggle" href="%(disqus_url)s%(login_url)s?next=article:%(thread_id)s" onclick="Dsq.Popup.login(); return false"><img class="dsq-login-icon" src="%(media_url)s/images/dsq-profile-btn.png" title="%(log_into)s" alt="%(log_into)s"/></a>',{login_url:Dsq.Urls.LOGIN,thread_id:Dsq.jsonData.thread.id,log_into:Dsq.Strings.get("Log into DISQUS")}),"&nbsp; ",(Dsq.jsonData.context.use_fb_connect?'<div id="dsq-fbc-login" onlogin="DisqusFbcParentController.onLogin()" size="medium" background="light" length="short" style="display:inline; margin-right:7px"></div>':""),(Dsq.jsonData.context.use_twitter_signin?Dsq.Utils.interpolate('<div id="dsq-twitter-login" class="dsq-twitter-login" onclick="Dsq.Twitter.startTwitterConnect();" style="display:inline; cursor: pointer"><img src="%(media_url)s/images/twitter-signin-short.png" style="margin-right:7px" /></div>',{}):""),(Dsq.jsonData.context.use_openid?Dsq.Utils.interpolate('<div id="dsq-openid-login" class="dsq-openid-login" onclick="Dsq.OpenID.requestURL();" style="display:inline; cursor:pointer;"><img src="%(media_url)s/images/openid-login-button.png"/></div>',{}):"")])}a=a.concat(["</div>","</div>",'<div id="dsq-authenticated" class="dsq-authenticated" ',Dsq.jsonData.request.is_authenticated?'style="display:block"':"",">",'<div class="dsq-authenticated-pic">',Dsq.Utils.interpolate('<a href="%(url)s" title="%(request_display_username)s"><img class="dsq-post-avatar" src="%(avatar_url)s" alt="" /></a>',{avatar_url:Dsq.Urls.REQUEST_USER_AVATAR,url:(Dsq.jsonData.request.is_remote?Dsq.jsonData.request.url:Dsq.jsonData.settings.disqus_url+Dsq.Urls.REQUEST_USER_PROFILE)}),"</div>",'<div class="dsq-authenticated-info">',"<ul>","<li>",(Dsq.jsonData.request.is_remote?Dsq.FmtStrings.LOGGED_IN_AS(Dsq.Utils.interpolate('<a href="%(url)s" title="%(request_display_username)s">%(request_display_username)s</a>',{url:Dsq.jsonData.request.url})):Dsq.FmtStrings.LOGGED_IN_AS(Dsq.Utils.interpolate('<a href="%(disqus_url)s%(profile_url)s" title="%(request_display_username)s">%(request_display_username)s</a>'))),"</li>",'<li class="logout">',(!Dsq.jsonData.request.is_remote?Dsq.Utils.interpolate('<img class="dsq-login-icon" src="%(media_url)s/images/dsqicon12.png" alt="%(logged_in_as)s"/>&nbsp',{logged_in_as:Dsq.FmtStrings.LOGGED_IN_AS(Dsq.jsonData.request.display_username)}):""),(!Dsq.jsonData.request.is_remote?Dsq.Utils.interpolate('<a href="%(disqus_url)s%(logout_url)s?ctkn=%(csrf_token)s" title="%(logout_from_disqus)s">',{logout_url:Dsq.Urls.LOGOUT,csrf_token:Dsq.CSRF_TOKEN,logout_from_disqus:Dsq.FmtStrings.LOGOUT_FROM("DISQUS")}):((Dsq.jsonData.request.remote_domain=="twitter")?Dsq.Utils.interpolate('using Twitter (<a href="%(disqus_url)s%(logout_url)s?ctkn=%(csrf_token)s" title="Logout">Logout</a>)',{logout_url:Dsq.Urls.LOGOUT,csrf_token:Dsq.CSRF_TOKEN}):((Dsq.jsonData.request.remote_domain=="openid")?Dsq.Utils.interpolate('using OpenID (<a href="%(disqus_url)s%(logout_url)s?ctkn=%(csrf_token)s" title="Logout">Logout</a>)',{logout_url:Dsq.Urls.LOGOUT,csrf_token:Dsq.CSRF_TOKEN}):""))),(!Dsq.jsonData.request.is_remote?Dsq.FmtStrings.LOGOUT_FROM('<span class="logo-disqus">DISQUS</span>'):""),"</a>","</li>","</ul>","</div>","</div>"]);if(Dsq.jsonData.context.use_fb_connect){a=a.concat(['<div id="dsq-fbc-authenticated" class="dsq-authenticated">','<div id="dsq-fbc-profilepic" class="dsq-authenticated-pic" uid="loggedinuser" type="FB.XFBML.ProfilePic" size="square" facebook-logo="true"></div>','<div class="dsq-authenticated-info">',"<ul>","<li>",'Logged in as <span id="dsq-fbc-name" uid="loggedinuser" type="FB.XFBML.Name" linked="true" useyou="false"></span>',"</li>",'<li class="logout">using Facebook Connect <a href="#" onclick="javascript:DisqusFbcParentController.logout();return false;">(Logout)</a></li>',"</ul>","</div>","</div>"])}a=a.concat(["</div>",'<div id="dsq-toolbar-items">',"</div>"]);a=a.concat([((!Dsq.jsonData.forum.allow_anon_post&&!Dsq.jsonData.request.is_authenticated)?('<p id="dsq-no-anon-msg">'+Dsq.Strings.get("Please log into <span class='logo-disqus'>Disqus</span>")+" "+(Dsq.jsonData.context.use_fb_connect?Dsq.Strings.get("or connect with Facebook")+" ":"")+(Dsq.jsonData.context.use_twitter_signin?Dsq.Strings.get("or sign in with Twitter")+" ":"")+(Dsq.jsonData.context.use_openid?Dsq.Strings.get("or sign in using OpenID")+" ":"")+Dsq.Utils.interpolate(Dsq.Strings.get("to comment on <strong>%(forum_name)s</strong>.</p>"))):""),'<div id="dsq-post-add"></div>','<div style="margin:10px 0">',((Dsq.jsonData.forum.use_media)?'<a href="#" id="dsq-media-link" onclick="Dsq.Post.showMenu(this, false, \'media\'); return false">'+Dsq.Strings.get("Use Media")+" <small>&#9660;</small></a>":""),"</div>"]);return a.join("")};this.commentCount=function(){var c,a,b;c=Dsq.jsonData.thread.total_posts;a=Dsq.jsonData.thread.num_posts;b=Dsq.jsonData.thread.offset_posts;if(c){if(Dsq.jsonData.thread.pagination_type=="num"){a=(b+1)+"-"+(b+a)}return Dsq.FmtStrings.SHOWING_COMMENTS_FULL(c,a)}else{return Dsq.FmtStrings.SHOWING_COMMENTS_WITHOUT_PAGINATION(a)}};this.header=function(){var b='<h3 id="dsq-comments-count" class="dsq-h3-commentcount">'+Dsq.Templates.commentCount()+"</h3>";var a=function(){var e="";var c=Dsq.jsonData.request.missing_perm;switch(c){case"locked":e+="<p>"+Dsq.Strings.get("Comments for this page are closed.")+"</p>";break;case"blacklist":e+="<p>"+Dsq.Strings.get("The site has blocked you from posting new comments.")+"</p>";break;case"verify":e+="<p>"+Dsq.Strings.get("You must first verify your Disqus Profile email address before your comments are approved.")+' <a target="_blank" href="'+Dsq.jsonData.settings.disqus_url+Dsq.Urls.VERIFY_EMAIL+'">'+Dsq.Strings.get("Click here to verify.")+"</a></p>";break;case"login":var d=Dsq.jsonData.settings.disqus_url+Dsq.Urls.LOGIN;e+='<p><a href="'+d+"?next=article:"+Dsq.jsonData.thread.id+'" onclick="Dsq.Popup.login(); return false">'+Dsq.Strings.get("You must be logged in to post a comment.")+"</a></p>";break}return e};b+='<div id="dsq-options" style="margin:15px 0"><span class="dsq-item-sort">'+Dsq.Strings.get("Sort by")+' <select id="dsq-sort-select" onchange="Dsq.Thread.sortBy(this.value);"> <option value="hot" '+(Dsq.jsonData.request.sort==4?'selected="selected"':"")+">"+Dsq.Strings.get("Popular now")+'</option> <option value="best" '+(Dsq.jsonData.request.sort==3?'selected="selected"':"")+">"+Dsq.Strings.get("Best Rating")+'</option> <option value="newest" '+(Dsq.jsonData.request.sort==2?'selected="selected"':"")+">"+Dsq.Strings.get("Newest first")+'</option> <option value="oldest" '+(Dsq.jsonData.request.sort==1?'selected="selected"':"")+">"+Dsq.Strings.get("Oldest first")+'</option> </select> &nbsp;</span> <span class="dsq-item-cp"><a href="'+Dsq.Urls.THREAD_VIEW+'">'+Dsq.Strings.get("Community Page")+'</a>&nbsp;&nbsp;&nbsp;</span><span class="dsq-subscribe-email"> <img src="'+Dsq.jsonData.settings.media_url+'/images/embed/email.png" style="width:12px;height:12px;vertical-align:middle"> <span id="dsq-subscribe">'+(Dsq.jsonData.context.subscribed?'<a href="#" onclick="Dsq.Thread.subscribe(0); return false">'+Dsq.Strings.get("Unsubscribe")+"</a>":'<a href="#" onclick="Dsq.Thread.subscribe(1); return false">'+Dsq.Strings.get("Subscribe by email")+"</a>")+'</span> </span> </div> <div id="dsq-alerts">'+a()+"</div>";if(!Dsq.jsonData.integration.reply_position){b=Dsq.Templates.authPost()+b}if(Dsq.jsonData.request.is_moderator){b='<div class="dsq-alert-message dsq-upgrade-message"> <strong>Disqus upgrade available.</strong> Hi '+Dsq.jsonData.request.display_username+', this message is being displayed to you because you are a moderator of this site. <a href="#" onclick="Dsq.$(\'dsq-upgrade-message\').style.display=\'block\';this.style.display=\'none\';return false">Click here for details.</a><div style="display:none; margin-top:10px;" id="dsq-upgrade-message">A new theme is available with added features. <a href="http://disqus.com/comments/settings/'+Dsq.jsonData.forum.url+'/?p=customize">To change your theme, click here</a> and choose the theme Narcissus. If you do not upgrade, you are missing out on features such as: real-time commenting,new sign-in integrations, and an upgrade interface. </div> </div> '+b}return b};this.footer=function(){var a=Dsq.Templates.pagination();if(Dsq.jsonData.integration.reply_position){a+=Dsq.Templates.authPost()}a+=Dsq.Templates.reactions();if(Dsq.jsonData.forum.linkbacks_enabled){a+=Dsq.Templates.trackbacks()}return a};this.pagination=function(){var a="";if(Dsq.$("dsq-pagination")){Dsq.$("dsq-pagination").innerHTML=""}if(!Dsq.jsonData.thread.paginate){return""}var c=function(){var h="";var k,l,d;var q=Dsq.jsonData.request.page;var e=Dsq.jsonData.thread.num_pages;var m=(q<e);var r=(q>1);var o=2;var n=[];for(var g=(q-o);g<(q+o);g++){if(g>0&&g<=e){n.push(g)}}k=(q!=1)&&!(1 in n);l=(q!=e)&&!(e in n);if(r){h+='<a class="dsq-paginate-arrows" id="dsq-paginate-previous" href="#dsq-comments" onclick="Dsq.Thread.paginate('+(q-1)+')" title="Previous"><span>&#9666;</span>&nbsp;'+Dsq.Strings.get("Previous")+"</a>"}if(k){h+='<a href="#dsq-comments" class="dsq-paginate-first" onclick="Dsq.Thread.paginate(1)">1</a> <span class="dsq-paginate-ellipsis">...</span>'}for(var f=0;f<n.length;f++){d=f+1;if(q==d){h+='<span class="dsq-paginate-selected'+(d==1?" dsq-paginate-first":"")+'">'+d+"</span>"}else{h+='<a href="#dsq-comments" onclick="Dsq.Thread.paginate('+d+')">'+d+"</a>"}}if(l){h+='<span class="dsq-paginate-ellipsis">...</span> <a href="#dsq-comments" onclick="Dsq.Thread.paginate('+e+')">'+e+"</a>"}if(m){h+='<a class="dsq-paginate-arrows" id="dsq-paginate-next" href="#dsq-comments" onclick="Dsq.Thread.paginate('+(q+1)+')" title="Next">'+Dsq.Strings.get("Next")+"&nbsp;<span>&#9656;</span></a>"}return h};var b=function(){return'<a class="dsq-paginate-append-text" href="#" onclick="Dsq.Thread.paginate(Dsq.jsonData.request.page + 1, this); return false">'+Dsq.Strings.get("Show more comments...")+'</a> <button type="button" class="dsq-button-small dsq-paginate-append-button" onclick="Dsq.Thread.paginate(Dsq.jsonData.request.page + 1, this);">'+Dsq.Strings.get("Load more comments")+'</button> <button type="button" class="dsq-button-small dsq-paginate-all-button" onclick="Dsq.Thread.paginate(Dsq.jsonData.request.page + 1, this, 0);">'+Dsq.Strings.get("Show all comments")+"</button>"};if(Dsq.jsonData.thread.num_pages>1&&Dsq.jsonData.request.page<Dsq.jsonData.thread.num_pages){if(Dsq.jsonData.thread.pagination_type==="num"){a+=c()}else{if(Dsq.jsonData.thread.pagination_type==="append"){a+=b()}}}if(Dsq.$("dsq-pagination")){Dsq.$("dsq-pagination").innerHTML=a;return""}else{return'<div id="dsq-pagination" class="dsq-pagination">'+a+"</div>"}};this.trackbacks=function(){var d="";var a,b;if(typeof DsqLocal!="undefined"&&DsqLocal.trackback_url&&DsqLocal.trackbacks){a=DsqLocal.trackbacks;b=DsqLocal.trackback_url}else{a=Dsq.jsonData.trackbacks;b=Dsq.jsonData.settings.disqus_url+"/forums/"+Dsq.jsonData.forum.url+"/"+Dsq.jsonData.thread.slug+"/trackback/"}d+='<div class="dsq-item-trackback">'+Dsq.Strings.get("Trackback URL")+'&nbsp;&nbsp;<input class="dsq-trackback-url" onclick="this.select()" readonly="true" value="'+b+'"></div>';if(a.length){d+='<ul id="dsq-references">';for(var c=0;c<a.length;c++){var e=a[c];d+='<li><cite><a href="'+e.author_url+'" rel="nofollow">'+e.author_name+'</a></cite> <p class="dsq-meta">'+e.date+'</p> <p class="dsq-content">'+e.excerpt+"</p></li>"}d+="</ul>";d='<h3 class="dsq-h3-trackbacks">'+Dsq.Strings.get("Trackbacks")+"</h3>"+d}return d};this.showRetweets=function(b,e,c){var a,k="";for(var h=0;h<Dsq.jsonData.reactions.length;h++){var l=Dsq.jsonData.reactions[h];if(l.id===b){a=l.retweets}}if(a){if(e===0){e=a.length}for(var f=0;f<e;f++){var d=a[f];k+='<a href="'+d.url+'">'+d.author_name+"</a>"+((f===(e-1))?".":", ")}}if(c===undefined){return k}var g=document.getElementById(c);g.innerHTML=k;return g};this.showMoreReactions=function(k,p,b,g){var o=document.getElementById("dsq-show-more-reactions");var a=o.parentNode;a.removeChild(o);for(var h=0;h<k.length;h++){var m=k[h];var c=Dsq.Templates.generateReactionHTML(m);if(c){a.innerHTML+=c}}if(p){var n=Dsq.jsonData.settings.disqus_url;var j=Dsq.jsonData.forum.url;var r=Dsq.jsonData.thread.id;var u=b;var e=g;var q="Dsq.Utils.execScript('"+n+"/forums/"+j+"/more_reactions.js?t="+r+"&s="+u+"&l="+e+"', true); return false;";a.innerHTML+='<li id="dsq-show-more-reactions"><a href="#" onclick="'+q+'">'+Dsq.Strings.get("Show more reactions")+"</a></li>"}};this.generateReactionHTML=function(d){if(d.body===null||d.body===""){return null}if(d.author_name===""){d.author_name="&nbsp;"}if(d.url===""){d.url=d.get_service_url}var b='<li class="dsq-reaction" id="dsq-reaction-'+d.id+'"><div class="dsq-reaction-header"><div class="dsq-header-avatar">';if(d.author_url&&d.author_url!==""){b+='<a target="_blank" href="'+d.author_url+'">'}else{b+='<a target="_blank" href="#" onclick="return false;">'}if(d.avatar_url&&d.avatar_url!==""){b+='<img src="'+d.avatar_url+'"/>'}else{b+='<img src="'+Dsq.jsonData.media_url+'/images/noavatar32.png"/>'}var e=(d.get_service_name=="trackback"||d.get_service_name=="pingback"?"rss":d.get_service_name.replace(" ",""));b+='<img class="dsq-service-icon" src="'+Dsq.jsonData.media_url+"/images/reactions/services/"+e+'.png"/></a></div><cite><span>'+d.author_name+'</span></cite><span class="dsq-header-meta"><a class="dsq-header-time">'+d.date_created+'</a></span></div><div class="dsq-reaction-body"><div class="dsq-reaction-message">'+d.body+'</div><div class="dsq-reaction-footer">'+Dsq.Strings.get("From")+' <a class="dsq-service-name" target="_blank" href="'+d.url+'">'+d.get_service_name+'</a> via <a href="'+d.source_url+'">'+(d.source=="backtype"?"BackType":"UberVU")+"</a>"+(Dsq.jsonData.request.is_moderator?'&nbsp;&bull;&nbsp;<a class="dsq-hide-reaction" href="#" onclick="Dsq.Reaction.hide('+d.id+'); return false;">'+Dsq.Strings.get("Hide")+"</a>":"")+"</div></div>";if(d.retweets){var c=d.retweets.length;if(c>0){b+='<div class="dsq-reaction-retweets">';if(c==1){b+=Dsq.Strings.get("One more retweet from")+' <a href="'+d.retweets[0].url+'">'+d.retweets[0].author_name+"</a>"}else{b+=(c+" "+Dsq.Strings.get("more retweets from")+" ");b+='<span id="dsq-reaction-retweets-'+d.id+'">';var a=(c>15)?15:c;b+=Dsq.Templates.showRetweets(d.id,a);if(a!=c){b+='</span> <a onclick="Dsq.Templates.showRetweets('+d.id+", 0, 'dsq-reaction-retweets-"+d.id+'\');this.parentNode.removeChild(this); return false;" href="#">'+Dsq.Strings.get("Show all")+"</a>"}}b+="</div>"}}b+="</li>";return b};this.cookieFailure=function(c){if(!Dsq.Utils.browser.gecko||(Dsq.jsonData.request.is_authenticated&&!Dsq.jsonData.request.is_remote)){return}var a=c?"-"+c:"";var b=document.createElement("div");b.innerHTML='<p class="dsq-alert-message dsq-error"> '+Dsq.Strings.get("<strong>Warning:</strong> A browser setting is preventing you from logging in.")+' <a href="#" onclick="Dsq.Popup.helpLogin(); return false">'+Dsq.Strings.get("Fix this setting to log in")+"</a>. </p>";if(Dsq.jsonData.request.is_authenticated){var e=Dsq.$("dsq-form-area"+a);e.parentNode.insertBefore(b,e)}else{var d=Dsq.$("dsq-authenticate"+a);d.appendChild(b)}};this.reactions=function(){var c,g;if(Dsq.jsonData.reactions===undefined||Dsq.jsonData.reactions.length===0){return""}c="";for(var b=0;b<Dsq.jsonData.reactions.length;b++){g=Dsq.jsonData.reactions[b];var k=Dsq.Templates.generateReactionHTML(g);if(k){c+=k}}if(Dsq.jsonData.has_more_reactions){var h=Dsq.jsonData.settings.disqus_url;var e=Dsq.jsonData.forum.url;var m=Dsq.jsonData.thread.id;var n=Dsq.jsonData.reactions_start;var a=Dsq.jsonData.reactions_limit;var j="Dsq.Utils.execScript('"+h+"/forums/"+e+"/more_reactions.js?t="+m+"&s="+n+"&l="+a+"', true); return false;";c+='<li id="dsq-show-more-reactions"><a href="#" onclick="'+j+'">'+Dsq.Strings.get("Show more reactions")+"</a></li>"}return'<h3 class="dsq-h3-reactions">'+Dsq.Strings.get("Reactions")+'</h3><ul id="dsq-reactions" class="dsq-reactions">'+c+"</ul>"};this.missingPermissions=function(){var a="";switch(Dsq.jsonData.request.missing_perm){case"locked":a=Dsq.Strings.get("Comments for this page are closed.");break;case"blacklist":a=Dsq.Strings.get("The site has blocked you from posting new comments.");break;case"verify":a=Dsq.Strings.get("You must first verify your Disqus Profile email address before your comments are approved.")+'<a target="_blank" href="'+Dsq.jsonData.settings.disqus_url+Dsq.Urls.VERIFY_EMAIL+'">'+Dsq.Strings.get("Click here to verify.")+"</a>";break;case"login":a='<a href="'+Dsq.jsonData.settings.disqus_url+Dsq.Urls.LOGIN+"?next=article:"+Dsq.jsonData.thread.id+'" onclick="Dsq.Popup.login(); return false;">'+Dsq.Strings.get("You must be logged in to post a comment.")+"</a>"}return"<p>"+a+"</p>"};this.prependPost=function(a){var b='<div id="comment-'+a+'"></div>';return b};this.appendPost=function(a){var b='<div id="dsq-comment-reply-'+a+'"></div>';return b};this.postPrependHeader=function(c){var d=Dsq.jsonData.posts[c];var a=Dsq.jsonData.users[d.user_key];var b=function(){var g=Dsq.Post.getUserServices(null,c);var f="";var h=3;for(var e=0;e<g.length;e++){f+=(e==h?'<li id="dsq-drop-hidden-'+c+'" class="dsq-drop-hidden"><ul>':"")+'<li class="dsq-drop-services"> <a class="dsq-service-'+g[e].name.toLowerCase()+'" href="'+g[e].url+'" target="_blank"> <img src="'+Dsq.jsonData.media_url+"/images/embed/services/"+g[e].name.toLowerCase()+'.png" alt="'+g[e].name.toLowerCase()+'">'+g[e].name+"</a> </li>"}if(e>=h){f+='</ul></li> <li id="dsq-drop-more-'+c+'" class="dsq-drop-more"><a href="#" onclick="Dsq.Post.dropProfileMore(this, '+c+'); return false"><small>&#9660;</small></a></li>'}return f};return'<div class="dsq-header-avatar" id="dsq-header-avatar-'+c+'" onmouseover="Dsq.Post.dropProfile('+c+')"> <a id="dsq-avatar-'+c+'" class="dsq-avatar" href="'+a.url+'" onclick="Dsq.Popup.popProfile('+c+'); return false;">'+(Dsq.jsonData.forum.show_avatar?'<img src="'+Dsq.jsonData.users[d.user_key].avatar+'" alt="" />':"")+"</a></div>"};this.postAppendHeader=function(a){var b=Dsq.jsonData.posts[a];return(b.author_is_moderator?'<img class="dsq-mod-star" src="'+Dsq.jsonData.settings.media_url+'/images/bullet-star.png" title="Moderator" alt="" />':"")+'<span class="dsq-header-meta"> <a id="dsq-time-'+a+'" class="dsq-header-time" href="#comment-'+a+'" title="Permalink">'+b.date+"</a> </span>"};this.preBody=function(a){return""};this.postBody=function(a){var b=Dsq.jsonData.posts[a];return(b.edited?'<p class="dsq-editedtxt">('+Dsq.Strings.get("Edited by a moderator")+")</p>":"")};this.postFooter=function(a){var b=Dsq.jsonData.posts[a];if(b.killed){return""}return'<div class="dsq-comment-footer" id="dsq-comment-footer-'+a+'"> <div id="dsq-points-'+a+'" class="dsq-likedtxt">'+(b.points?b.points+" "+Dsq.Utils.pluralize(b.points,Dsq.Strings.get("person"),Dsq.Strings.get("people"))+" "+Dsq.Strings.get("liked this comment."):"")+'</div><ul class="dsq-comment-options dsq-list-style">'+(b.votable?'<li class="dsq-list-first dsq-rate" id="dsq-rate-cont-'+a+'">'+(!b.up_voted?'<a href="#" onclick="Dsq.Post.rate(this, '+a+', 1); return false;">'+Dsq.Strings.get("Like")+"</a>":Dsq.Strings.get("You liked this."))+"</li>":"")+'<li class="dsq-report'+(!b.votable?" dsq-list-first":"")+'" id="dsq-post-report-'+a+'"><a href="#" class="dsq-post-report" onclick="Dsq.Post.report('+a+', false); return false;">'+Dsq.Strings.get("Report")+'</a></li></ul><ul class="dsq-list-style">'+(b.can_reply?'<li class="dsq-list-first"><a href="#" id="dsq-reply-link-'+a+'" onclick="Dsq.Post.toggleReply(this, '+a+'); return false;">'+Dsq.Strings.get("Reply")+"</a></li>":"")+(b.can_reply&&!b.has_replies&&b.from_request_user?'<li id="dsq-edit-el-'+a+'"><a id="dsq-edit-link-'+a+'" href="#" onclick="Dsq.Post.edit(this, '+a+'); return false;">'+Dsq.Strings.get("Edit")+"</a></li>":"")+'<li class="'+(!b.can_reply?"dsq-list-first":"")+'" id="dsq-more-el-'+a+'"><a id="dsq-more-link-'+a+'" href="#" onclick="Dsq.Post.showMenu(this, '+a+", 'more'); return false\">"+Dsq.Strings.get("More")+" <small>&#9660;</small></a></li>"+(Dsq.jsonData.forum.use_media?'<li id="dsq-media-el-'+a+'" style="display:none"><a id="dsq-media-link-'+a+'" href="#" onclick="Dsq.Post.showMenu(this, '+a+", 'media'); return false\">"+Dsq.Strings.get("Use Media")+" <small>&#9660;</small></a></li>":"")+'</ul><div id="dsq-reply-bar-'+a+'" class="dsq-reply-bar" style="display:none"> <div id="dsq-reply-bar-items-'+a+'" class="dsq-reply-bar-items"> </div> <div id="dsq-reply-bar-auth-'+a+'" class="dsq-reply-bar-auth">'+(!Dsq.jsonData.request.is_authenticated?(Dsq.jsonData.forum.allow_anon_post?'<a href="#" class="dsq-help dsq-reply-req-opt" title="'+Dsq.Strings.get("You are commenting as a Guest. You may choose to log into an existing DISQUS Profile, your Facebook, Twitter or OpenID account to comment on")+" "+Dsq.jsonData.forum.name+'" onclick="Dsq.Popup.helpBadges(); return false">'+Dsq.Strings.get("Optional")+":</a>":'<a href="#" class="dsq-help dsq-reply-req-opt" title="'+Dsq.Strings.get("You must log into an account in order to comment on")+" "+Dsq.jsonData.forum.name+'" onclick="Dsq.Popup.helpBadges(); return false">'+Dsq.Strings.get("Required")+":</a>")+'<img class="dsq-login-icon" src="'+Dsq.jsonData.settings.media_url+'/images/dsq-favicon-16x16.png" alt="" /> <a id="dsq-reply-login-'+a+'" href="'+Dsq.jsonData.settings.disqus_url+Dsq.Urls.LOGIN+"?next=article:"+Dsq.jsonData.thread.id+'" onclick="Dsq.Popup.login(); return false">'+Dsq.Strings.get("Login")+"</a>"+(Dsq.jsonData.context.use_fb_connect?'&nbsp;or&nbsp;<img class="fb_login_image" src="http://static.ak.fbcdn.net/images/fbconnect/login-buttons/connect_light_small_short.gif" alt="Facebook Connect"/> <a href="#" onclick="FB.Connect.requireSession(DisqusFbcParentController.onLogin); return false;">'+Dsq.Strings.get("Connect")+"</a>":"")+(Dsq.jsonData.context.use_twitter_signin?'<img src="'+Dsq.jsonData.settings.media_url+'/images/twitter-signin-icon.png" alt="" /> <a href="#" onclick="Dsq.Twitter.startTwitterConnect(); return false">'+Dsq.Strings.get("Sign-in")+"</a>":"")+(Dsq.jsonData.context.use_openid?'<img src="'+Dsq.jsonData.settings.media_url+'/images/openid-login-icon.png" alt="" /> <a href="#" onclick="Dsq.OpenID.requestURL(); return false">OpenID</a>':""):(Dsq.jsonData.forum.show_avatar?'<a href="'+Dsq.jsonData.settings.disqus_url+"/"+Dsq.jsonData.request.username+'" title="'+Dsq.jsonData.request.username+'"><img class="dsq-post-avatar" src="'+Dsq.Urls.REQUEST_USER_AVATAR+'" alt="" /></a>':"")+(Dsq.jsonData.request.is_remote?Dsq.FmtStrings.LOGGED_IN_AS(Dsq.Utils.interpolate('<a href="%(url)s" title="%(request_display_username)s">%(request_display_username)s</a>',{url:Dsq.jsonData.request.url})):Dsq.FmtStrings.LOGGED_IN_AS(Dsq.Utils.interpolate('<a href="%(disqus_url)s%(profile_url)s" title="%(request_display_username)s">%(request_display_username)s</a>'))))+'</div> </div> <div id="dsq-reply-'+a+'"></div> </div>'};this._makeAttributes=function(b){var a=[];for(key in b){if(b.hasOwnProperty(key)){a.push(" "+key+'="'+b[key]+'"')}}a=a.join("");return a};this._frameGeneric=function(f,e,c){var a;if(typeof(a)=="undefined"){a=""}var b={f:Dsq.jsonData.forum.url,t:Dsq.jsonData.thread.slug,ifrs:encodeURIComponent(disqus_iframe_css),to_redirect:encodeURIComponent(window.location),cbp:a,ff:Dsq.Thread.ff,fc:Dsq.Thread.fc,ac:Dsq.Thread.ac,default_text:disqus_default_text};f+="?"+(new Date()).getTime();if(e){for(var d in e){if(e.hasOwnProperty(d)){b[d]=encodeURIComponent(e[d])}}}for(d in b){if(b[d]&&b.hasOwnProperty(d)){f+="&"+d+"="+b[d]}}return['<iframe marginwidth="0" marginheight="0" hspace="0" vspace="0" frameborder="0"',(' allowtransparency="true" src="'+f+'"'),this._makeAttributes(c),"</iframe>"].join("")};this.frameLogin=function(a){var d={};var c=Dsq.jsonData.settings.disqus_url+Dsq.Urls.EMBED_LOGIN;var b=a||{};b["class"]="dsq-post-login";if(typeof disqus_frame_theme!="undefined"){d.theme=disqus_frame_theme}return this._frameGeneric(c,d,b)};this.frameReply=function(b,e,a){var d=(typeof b!="undefined")?Dsq.jsonData.posts[b]:false;var g=Dsq.Urls.REPLY;var f={def_email:disqus_def_email,def_name:disqus_def_name};if(e){for(var c in e){if(e.hasOwnProperty(c)){f[c]=e[c]}}}if(d){f.parent_post=b}if(typeof disqus_per_page!="undefined"){f.per_page=disqus_per_page}if(typeof disqus_frame_theme!="undefined"){f.theme=disqus_frame_theme}if(Dsq.jsonData.request.is_authenticated){a["class"]+="-authenticated"}return this._frameGeneric(g,f,a)};this.frameEdit=function(a){var b=(typeof a!="undefined")?Dsq.jsonData.posts[a]:false;var d=Dsq.jsonData.settings.disqus_url+Dsq.Urls.EMBED_EDIT;var c={p:a};return this._frameGeneric(d,c,{"class":"dsq-post-edit",name:"dsq-edit_"+a+"-frame"})};this.menuMore=function(b){var c=Dsq.jsonData.posts[b];var a=Dsq.jsonData.users[c.user_key];return'<li><a href="#comment-'+b+'" onclick="Dsq.Popup.permalink('+b+')">'+Dsq.Strings.get("Link")+'</a></li> <li><a href="#" onclick="Dsq.Popup.popProfile('+b+'); return false;">'+Dsq.Strings.get("Profile")+"</a></li>"+(Dsq.jsonData.request.is_moderator?' <li class="dsq-menu-sep"></li>'+(c.email?'<li class="dsq-admin-email">'+c.email+"</li>":"")+' <li class="dsq-admin-ip">'+c.ip+'</li> <li class="dsq-menu-sep"></li>'+(Dsq.jsonData.request.moderator_can_edit?' <li class="dsq-admin-edit"><a href="#" onclick="Dsq.Post.edit(this, '+b+'); return false;">'+Dsq.Strings.get("Edit Comment")+"</a></li>":"")+' <li class="dsq-remove"><a href="#" onclick="Dsq.Post.removePost('+b+', 1); return false;">'+Dsq.Strings.get("Remove Comment")+'</a></li> <li class="dsq-report-spam"><a href="#" onclick="Dsq.Post.reportSpam('+b+'); return false;">'+Dsq.Strings.get("Mark Spam")+'</a></li> <li class="dsq-block-user"><a href="#" onclick="Dsq.Popup.blacklist('+b+'); return false">'+Dsq.Strings.get("Block User")+"</a></li>":"")};this.menuMedia=function(a){return'<li><a href="#" onclick="Dsq.Post.toggleMediaReply(this, '+a+", 'seesmic'); return false;\">"+Dsq.Strings.get("Record video")+"</a></li>"};this.dropProfile=function(d){var e=Dsq.jsonData.posts[d];var a=Dsq.jsonData.users[e.user_key];var c=function(){var k=Dsq.Post.getUserServices(null,d);var j="";var l=3;for(var h=0;h<k.length;h++){j+=(h==l?'<li id="dsq-drop-hidden-'+d+'" class="dsq-drop-hidden"><ul>':"")+'<li class="dsq-drop-services"> <a class="dsq-service-'+k[h].name.toLowerCase()+'" href="'+k[h].url+'" target="_blank"> <img src="'+Dsq.jsonData.media_url+"/images/embed/services/"+k[h].name.toLowerCase()+'.png" alt="'+k[h].name.toLowerCase()+'">'+k[h].name+"</a> </li>"}if(h>=l){j+='</ul></li> <li id="dsq-drop-more-'+d+'" class="dsq-drop-more"><a href="#" onclick="Dsq.Post.dropProfileMore(this, '+d+'); return false"><small>&#9660;</small></a></li>'}return j};var g='<li class="dsq-drop-showlnk"><a href="#" onclick="Dsq.Popup.popProfile('+d+'); return false;">Expand &#8663;</a></li>';var b="";if(a.registered){b="with "+a.points+" points (more points are better)."}if(a.is_remote){var f=a.remote_domain_name;g+='<li class="dsq-drop-badge" title="'+a.display_name+" is a "+f+" user "+b+'" onclick="Dsq.Popup.helpBadges()">';g+='<span class="dsq-badge-'+f.toLowerCase()+'">'+f+"</span></li>"}else{if(a.registered){if(a.verified){g+='<li class="dsq-drop-badge" title="'+a.display_name+" has a verified commenter profile "+b+'" onclick="Dsq.Popup.helpBadges()">';g+='<span class="dsq-badge-verified">Verified</span></li>'}else{g+='<li class="dsq-drop-badge" title="'+a.display_name+" has a registered, but unverified, commenter profile "+b+'" onclick="Dsq.Popup.helpBadges()">';g+='<span class="dsq-badge-registered">Registered</span></li>'}}else{g+='<li class="dsq-drop-badge" title="'+a.display_name+' has not claimed this commenter profile." onclick="Dsq.Popup.helpBadges()"><span class="dsq-badge-guest">Guest</span></li>'}}g+=c();return g};this._popupGeneric=function(a){return'<div class="dsq-popup-content"> <div class="dsq-popup-top"></div> <div class="dsq-popup-body" class="clearfix"> <div class="dsq-popup-body-padding"> <div class="dsq-popup-header"> <a class="dsq-close-link" href="#" onclick="Dsq.Popup._closePopup(null, true); return false"><img src="'+Dsq.jsonData.settings.media_url+'/images/modal-close.png" alt="" /></a>'+a.header+"</div>"+a.body+'<div class="powered-by"><a href="'+Dsq.jsonData.settings.disqus_url+'/comments/">Powered by <img src="'+Dsq.jsonData.settings.media_url+'/images/embed/disqus-logo.png" alt="Disqus Comments" style="margin-bottom:-5px" /></a></div> </div> <!-- padding --> </div> <!-- body --> <div class="dsq-popup-bottom"></div> </div> <!-- popup-top -->'};this.popupProfile=function(c){var g=Dsq.Post.getUserServices(c,null);var b=Dsq.jsonData.users[c];var a="";var e="";var f={};var d=function(){var j="";for(var h=0;h<g.length;h++){j+=(h===0?"<h4>"+Dsq.Strings.get("Connections")+"</h4><ul>":"")+'<li> <img src="'+Dsq.jsonData.media_url+"/images/embed/services/"+g[h].name.toLowerCase()+'.png" alt="'+g[h].name.toLowerCase()+'" title="'+g[h].name.toLowerCase()+'" /> <a class="dsq-service-'+g[h].name.toLowerCase()+'" href="'+g[h].url+'" target="_blank">'+g[h].name+"</a> </li>"+(h+1==g.length?"</ul>":"")}return j};a='<table> <tr> <td> <a class="dsq-profile-userurl" href="'+b.url+'"><img class="dsq-popup-profile-avatar" src="'+b.avatar+'" alt="" /></a> </td> <td> <div class="dsq-popup-profile-user"> <h3>'+b.display_name+'</h3> <div class="dsq-popup-profile-user-stats" id="dsq-popup-profile-user-stats-'+c+'">'+Dsq.Strings.get("Loading...")+"</div> </div> </td> </tr> </table> ";e='<div class="dsq-popup-profile-state"> '+Dsq.Strings.get("This is a")+'&nbsp;<span class="'+(b.registered?(b.verified?" dsq-badge-verified":(b.is_remote?" dsq-badge-"+b.remote_domain_name.toLowerCase():" dsq-badge-registered")):" dsq-badge-guest")+'">'+(b.registered?(b.verified?Dsq.Strings.get("Verified"):(b.is_remote?b.remote_domain_name:Dsq.Strings.get("Registered"))):Dsq.Strings.get("Guest"))+"</span>&nbsp;"+Dsq.Strings.get("commenter profile")+'.&nbsp;<a class="dsq-profile-userurl" href="'+b.url+'"><strong>'+Dsq.Strings.get("View more comments")+"</strong></a>"+(!b.points?'<p class="dsq-popup-notice">If this is you, <a href="http://disqus.com/profile" target="_blank">claim it now</a> to manage your comments.</p>':"")+((b.registered&&!b.verified&&(Dsq.jsonData.request.username&&(Dsq.jsonData.request.username==b.username))&&!b.is_remote)?'<p class="dsq-popup-notice"><strong>'+Dsq.Strings.get("Alert")+"</strong>: "+Dsq.Strings.get("You have not verified this account.")+' <a href="'+Dsq.jsonData.settings.disqus_url+'/verify">'+Dsq.Strings.get("Verify it now.")+"</a></p>":"")+'</div> <div id="dsq-profile-status-'+c+'" class="dsq-popup-profile-status" style="display:none"></div> <div class="dsq-popup-profile-snapshot"> <table> <tr> <td> <div id="dsq-popup-profile-active-sites-wrapper-'+c+'"> <h4>'+Dsq.Strings.get("Most active sites")+'</h4> <ul id="dsq-popup-profile-active-sites-'+c+'"> <li>'+Dsq.Strings.get("Loading...")+"</li> </ul> </div> </td> <td>"+d()+'<div id="dsq-popup-profile-moderated-wrapper-'+c+'"> <h4>'+Dsq.Strings.get("Moderator of")+'</h4> <ul id="dsq-popup-profile-moderated-'+c+'"> <li>'+Dsq.Strings.get("Loading...")+"</li> </ul> </div> </td> </tr> </table> </div>";f={header:a,body:e};return this._popupGeneric(f)};this.popupModal=function(c,b){var a={header:"<h3>"+c+"</h3>",body:b};return this._popupGeneric(a)};this.alertContent=function(b,a){var c={post_not_approved:{title:"Comment awaiting approval by a moderator",message:"Thanks for posting. "+(Dsq.jsonData.request.missing_perm=="verify"?'You must complete <a href="'+Dsq.jsonData.settings.disqus_url+Dsq.Urls.VERIFY_EMAIL+'">verifying</a> your <span class="logo-disqus">Disqus</span> Profile email in order for your comment to appear here.':"Your comment must be approved by a moderator before appearing here.")},post_has_profile:{title:"Use your existing commenter profile",message:'You have just posted your commment as a <span class="dsq-badge dsq-badge-guest">Guest</span>, but you may already have a <span class="dsq-badge dsq-badge-registered">Registered</span> commenter profile.<br /><br /><a href="'+Dsq.jsonData.settings.disqus_url+'/claim">Log in and claim this comment!</a>'}};return c[b]||false};this.voted=function(b,c,a){Dsq.$("dsq-points-"+b).innerHTML=c+Dsq.Utils.pluralize(c," person"," people")+" "+Dsq.Strings.get("liked this comment.");if(a){Dsq.$("dsq-rate-cont-"+b).innerHTML=Dsq.Strings.get("You liked this.")}};this.subscribed=function(a){var c,b;if(a){c=Dsq.Strings.get("Subscribed!");b=Dsq.Strings.get("You have subscribed to this comment thread. New comments will be sent directly to your email inbox, where you may read and respond by email.");Dsq.$("dsq-subscribe").innerHTML='<a href="#" onclick="Dsq.Thread.subscribe(0); return false">'+Dsq.Strings.get("Unsubscribe")+"</a>"}else{c=Dsq.Strings.get("Unsubscribed");b=Dsq.Strings.get("You have unsubscribed to this comment thread. New comments will no longer be sent to your email inbox.");Dsq.$("dsq-subscribe").innerHTML='<a href="#" onclick="Dsq.Thread.subscribe(1); return false">'+Dsq.Strings.get("Subscribe by email")+"</a>"}Dsq.Popup.popModal(b,c)};this.highlighted=function(){Dsq.Popup.popModal(Dsq.Strings.get("This comment has been highlighted."),Dsq.Strings.get("Highlighted comment"))};this.mediaSeesmic=function(b,a){return'<div id="dsq-seesmic-'+b+'_preview" class="dsq-seesmic-preview"><a href="http://www.seesmic.com/video/'+b+'" target="_blank" class="see_link">&nbsp;</a> <div style="display:block;width:160px; height:120px; border:none; background-image:url(http://t.seesmic.com/thumbnail/'+a+')"> <div id="dsq-seesmic-'+b+'_hide" class="seePlayOverlay" style="display:none;"><img onclick="see_play_video(\''+b+'\',false)" src="'+Dsq.jsonData.settings.media_url+'/images/seesmic/stopOverlay.png" width="50" height="50" style="cursor:pointer; cursor:hand; padding-top: 30px; padding-left: 50px" alt="" /></div> <div id="dsq-seesmic-'+b+'_show" class="seePlayOverlay"><img onclick="see_play_video(\''+b+'\',true)" src="'+Dsq.jsonData.settings.media_url+'/images/seesmic/playOverlay.png" width="50" height="50" style="cursor:pointer; cursor:hand; border:none; padding-top: 30px; padding-left: 50px" alt="" /></div> </div> </div> <div id="'+b+'_content" style="display:block; width:100%; padding-top:5px"></div>'};this.postComment_onSuccess=function(c){var a=Dsq.$("dsq-num-posts");var b=Dsq.$("dsq-total-posts");if(a){a.innerHTML=parseInt(a.innerHTML,10)+1}if(b){b.innerHTML=parseInt(b.innerHTML,10)+1}}};Dsq.Templates=new Dsq.Templates();Dsq.Templates.Filters=new Dsq.Templates.Filters();var Dsq;if(typeof Dsq==="undefined"){Dsq={}}Dsq.Post=function(){this.openedMenu={};this.menuEventListener=null;this.stateReplyToggled={};this.stateEditToggled={};this.stateRecordLink={};this.insert=function(i,b,l,f){var e='<li id="dsq-comment-%(id)s"><div id="dsq-comment-header-%(id)s" class="dsq-comment-header"><cite id="dsq-cite-%(id)s" class="dsq-comment-cite">%(author)s</cite></div><div id="dsq-comment-body-%(id)s" class="dsq-comment-body"><div id="dsq-comment-message-%(id)s" class="dsq-comment-message">%(message)s</div></div></li>';var d='<a id="dsq-author-user-%(id)s" href="%(author_url)s" target="_blank" rel="nofollow">%(author_name)s</a>';var h=Dsq.jsonData.posts[b];var g=Dsq.jsonData.users[h.user_key];var k=Dsq.Utils.interpolate(e,{id:b,message:l,author:(g.blog?Dsq.Utils.interpolate(d,{id:b,author_url:g.blog,author_name:g.display_name}):g.display_name)});var a=document.createElement("div");k=k.replace(Dsq.COMMENTS_RE,Dsq.CommentsHandler);a.innerHTML=k;if(i===-1){Dsq.$("dsq-comments").appendChild(a)}else{if(!i){Dsq.$("dsq-comments").insertBefore(a,Dsq.$("dsq-comments").firstChild)}else{if(Dsq.$("dsq-comment-"+i)){var j="dsq-append-post-"+i;var c=Dsq.$(j);c=c.nextSibling;while(c){if(!c||c.nodeType==1){break}c=c.nextSibling}if(!c){c=Dsq.$(j)}c.parentNode.insertBefore(a,c.nextSibling)}}}};this.incrementPostCount=function(){var a=Dsq.$("dsq-num-posts");var b=Dsq.$("dsq-total-posts");if(a){a.innerHTML=parseInt(a.innerHTML,10)+1}if(b){b.innerHTML=parseInt(b.innerHTML,10)+1}};this.outlineComment=function(a){Dsq.$("dsq-comment-"+a).className+=" dsq-comment-outline";setTimeout("(function () { Dsq.Post.clearOutlineComment("+a+") })()",3000)};this.clearOutlineComment=function(a){Dsq.$("dsq-comment-"+a).className=Dsq.$("dsq-comment-"+a).className.replace("dsq-comment-outline","")};this.showMenu=function(c,e,b){var a=Dsq.Utils.findPos(c);var d=document.createElement("ul");if(this.openedMenu){if(this.openedMenu.linkClicked){this.openedMenu.linkClicked=false;return}}switch(b){case"more":d.innerHTML=Dsq.Templates.menuMore(e);break;case"media":d.innerHTML=Dsq.Templates.menuMedia(e);break;default:break}d.id="dsq-menu-"+e;d.className="dsq-menu";Dsq.$b.appendChild(d);a[1]+=15;d.style.left=a[0]+"px";d.style.top=a[1]+"px";d.style.display="block";this.openedMenu={el:d,id:e,name:b,linkClicked:false};this.menuEventListener=Dsq.Utils.addEventListener(document,"mouseup",this._hideMenu)};this._hideMenu=function(d){var b=d.target||d.srcElement;var a=Dsq.Post.openedMenu.el;var f=Dsq.Post.openedMenu.id;var c;if(!f){c="dsq-"+Dsq.Post.openedMenu.name+"-link"}else{c="dsq-"+Dsq.Post.openedMenu.name+"-link-"+f}if(!a){return}if(!Dsq.Popup.isClicked(d,a.id)){a.style.display="none";Dsq.Utils.removeEventListener(Dsq.Post.menuEventListener);Dsq.Utils.deleteNode(a)}else{if(b&&typeof b.href!="undefined"){a.style.display="none";Dsq.Post.openedMenu.el=null}}if(Dsq.Popup.isClicked(d,c)){Dsq.Post.openedMenu.linkClicked=true}};this.getUserServices=function(d,a){if(!d&&a){var g=Dsq.jsonData.posts[a];d=g.user_key}var b=Dsq.jsonData.users[d];var j=[];var f=["blog","twitter","facebook","tumblr"];function e(k){var l=b[k];var i={blog:function(m){return m},twitter:function(m){return m},facebook:function(m){return m},tumblr:function(m){return"http://"+m+".tumblr.com"}};return i[k](l)}for(var c=0;c<f.length;c++){if(b[f[c]]){var h=e(f[c]);j.push({name:f[c],url:h})}}return j};this.dropProfile=function(c){var b=Dsq.$("dsq-drop-profile-"+c);if(b){if(Dsq.Utils.browser.ie6){b.style.display=(b.style.display=="inline")?"none":"inline"}return}else{b=document.createElement("ul")}b.id="dsq-drop-profile-"+c;b.className="dsq-drop-profile";if(Dsq.Utils.browser.ie6){b.style.display="inline"}var a=Dsq.$("dsq-header-avatar-"+c);b.innerHTML=Dsq.Templates.dropProfile(c);a.appendChild(b)};this.dropProfileMore=function(b,c){var a=Dsq.$("dsq-drop-hidden-"+c);a.style.display="inline";b.parentNode.style.display="none"};this._updateReplyLinks=function(d,f){var e={};if(f){if(this.stateReplyToggled[f]){d.innerHTML=Dsq.Strings.get("Cancel");e.media="inline";e.edit="none"}else{d.innerHTML=Dsq.Strings.get("Reply");e.media="none";e.edit="inline"}}for(var c in e){if(e.hasOwnProperty(c)){var b=Dsq.$("dsq-"+c+"-el-"+f),a=Dsq.$("dsq-"+c+"-spacer-"+f);if(b){b.style.display=e[c];if(a){a.style.display=e[c]}}}}};this._updateMediaLinks=function(b,d){var a=(d)?("-"+d):"";var c=Dsq.$("dsq-media-link"+a);if(this.stateRecordLink[d]){c.innerHTML=Dsq.Strings.get("Cancel Media");c.onclick=function(){Dsq.Post.toggleMediaReply(c,d);return false}}else{c.innerHTML=Dsq.Strings.get("Use Media")+" <small>&#9660;</small>";c.onclick=function(){Dsq.Post.showMenu(c,d,"media");return false}}};this.toggleReply=function(a,c){if(window.disqus_use_postmessage){if(!this.stateReplyToggled[c]){Dsq.$("dsq-reply-"+c).style.display="block";Dsq.$("dsq-reply-bar-"+c).style.display="block";if(!Dsq.frames["reply_"+c]){var b=Dsq.jsonData.posts[c];Dsq.frames["reply_"+c]=new Dsq.ReplyFrame(Dsq.$("dsq-reply-frame-"+c),c);Dsq.frames["reply_"+c].init();Dsq.frames["reply_"+c].setState(c,b.depth)}}else{Dsq.$("dsq-reply-"+c).style.display="none";Dsq.$("dsq-reply-bar-"+c).style.display="none"}}else{if(!this.stateReplyToggled[c]){Dsq.$("dsq-reply-bar-"+c).style.display="block";Dsq.Iframes.showReplyIframeInContainerIfAllowed(Dsq.$("dsq-reply-"+c),c)}else{Dsq.$("dsq-reply-bar-"+c).style.display="none";Dsq.Iframes.hideAllInContainer(Dsq.$("dsq-reply-"+c));if(this.stateRecordLink[c]){this.toggleMediaReply(Dsq.$("dsq-media-link-"+c),c)}}}this.stateReplyToggled[c]=!this.stateReplyToggled[c];this._updateReplyLinks(a,c);if(Dsq.Utils.browser.ie){Dsq.Utils.fixIframesIE("dsq-reply-"+c)}Dsq.Events.fire(Dsq.Events.REPLY_IFRAME_TOGGLED,{postId:c,opened:this.stateReplyToggled[c]})};this.toggleMediaReply=function(b,d,c){d=d||0;var a=(d?Dsq.$("dsq-reply-"+d):Dsq.$("dsq-post-add"));if(!this.stateRecordLink[d]){Dsq.Iframes.showReplyIframeInContainer(a,d,{xtype:c},"dsq-post-video")}else{Dsq.Iframes.showReplyIframeInContainer(a,d)}this.stateRecordLink[d]=!this.stateRecordLink[d];this._updateMediaLinks(b,d);if(Dsq.Utils.browser.ie){Dsq.Utils.fixIframesIE()}};this.edit=function(a,b){Dsq.$("dsq-comment-message-"+b).innerHTML=Dsq.Templates.frameEdit(b);a.parentNode.style.display="none";if(Dsq.Utils.browser.ie){Dsq.Utils.fixIframesIE("dsq-comment-message-"+b)}};this.rate=function(b,c,a){if(Dsq.jsonData.request.is_authenticated||Dsq.jsonData.forum.allow_anon_votes){if(a==1){Dsq.$("dsq-rate-cont-"+c).innerHTML='<img src="'+Dsq.jsonData.settings.media_url+'/images/loading-small.gif">'}Dsq.Utils.execScript(Dsq.jsonData.settings.disqus_url+Dsq.Urls.EMBED_VOTE+"?post_id="+c+"&vote="+a)}else{Dsq.Popup.login(Dsq.Strings.get("To rate, please log in"))}};this.showParent=function(c){var b=Dsq.$("dsq-author-user-"+c).innerHTML;var a=Dsq.$("dsq-comment-message-"+c).innerHTML;a+='<br /><br /><a href="#comment-'+c+'">'+Dsq.Strings.get("Jump to comment")+"</a>";Dsq.Popup.popModal(a,b+" "+Dsq.Strings.get("said")+"...",c)};this.report=function(d,c){if(c){Dsq.Utils.postToUrl(Dsq.jsonData.settings.disqus_url+Dsq.Urls.EMBED_REPORT,{post_id:d});Dsq.Popup.popModal(Dsq.Strings.get("Thank you. This comment has been flagged for moderator attention."),Dsq.Strings.get("Successfully flagged"));Dsq.Utils.deleteNode(Dsq.$("dsq-post-report-"+d))}else{var b=Dsq.Strings.get("Flag innapropriate comment");var a=Dsq.Strings.get("Are you sure you would like to report this comment to a moderator")+'? <br /><br /><button type="button" onclick="Dsq.Popup._closePopup(null, true)"><strong>'+Dsq.Strings.get("No")+"</strong>, "+Dsq.Strings.get("Never mind")+'</button>&nbsp;&nbsp;&nbsp;<button type="button" onclick="Dsq.Post.report('+d+', true);"><strong>'+Dsq.Strings.get("Yes")+"</strong>, "+Dsq.Strings.get("Flag innapropriate comment")+"</button><br /><br />"+Dsq.Strings.get("This will flag comments for moderators to take action")+".";Dsq.Popup.popModal(a,b,d)}};this.reportSpam=function(a){Dsq.Utils.execScript(Dsq.jsonData.settings.disqus_url+Dsq.Urls.REPORT_SPAM+"?post_id="+a)};this.removePost=function(b,a){Dsq.Utils.execScript(Dsq.jsonData.settings.disqus_url+Dsq.Urls.EMBED_KILL+"?post_id="+b+"&kill="+a)};this.blockUser=function(g,c){var d=[];if(typeof(c)=="undefined"){var f=Dsq.$("dsq-blacklist-username");var a=Dsq.$("dsq-blacklist-email");var e=Dsq.$("dsq-blacklist-ip");if(f&&f.checked){d.push(5)}if(a&&a.checked){d.push(1)}if(e&&e.checked){d.push(2)}}else{d.push(c)}if(d.length<1){alert("Please select something to add to the blacklist.")}for(var b=0;b<d.length;b++){Dsq.Utils.execScript(Dsq.jsonData.settings.disqus_url+Dsq.Urls.EMBED_BLOCK+"?post_id="+g+"&type="+d[b])}};this.highlight=function(a,b){Dsq.Utils.execScript(Dsq.jsonData.settings.disqus_url+Dsq.Urls.EMBED_HIGHLIGHT+"?post_id="+b);Dsq.Utils.deleteNode(a)};this.highlightPost=function(a){Dsq.Utils.execScript(Dsq.jsonData.settings.disqus_url+Dsq.Urls.EMBED_HIGHLIGHT+"?new=1&post_id="+a)};this.showAlert=function(d,c){var a=Dsq.$("dsq-comment-message-"+d);var b='<div class="dsq-comment-alert">'+c+"</div>";a.innerHTML=b+a.innerHTML}};Dsq.Post=new Dsq.Post();var Dsq;if(typeof Dsq==="undefined"){Dsq={}}Dsq.Thread=function(){this.fc=null;this.ff=null;this.ac=null;this.adminIsOn=false;this.hlComment=null;this.hlCommentClass=null;this.getNextComment=function(b){var a=b.id;b=b.nextSibling;while(b){if(b.id&&b.id.indexOf("dsq-comment-")!=-1&&b.id!=a){return b}b=b.nextSibling}return null};this.getActiveCommentId=function(){if(document.URL.indexOf("#comment-")>=0){var a=document.URL.slice(document.URL.indexOf("#")+1);return a.replace("comment-","")}return null};this.highlightAnchor=function(){var a=this.getActiveCommentId();if(a===null){return false}var c="dsq-comment-"+a;var b=window.location.hash;if(Dsq.Utils.browser.webkit){window.location.hash="";window.location.hash=b}this.hlComment=Dsq.$(c);if(!this.hlComment){return false}this.hlCommentClass=this.hlComment.className;this.hlComment.className+=" dsq-hl-anchor";setTimeout(Dsq.Thread.highlightClear,3000);return true};this.highlightClear=function(){if(!this.hlComment){return}this.hlComment.className=this.hlCommentClass};this.login=function(a){var c,b;if(a.id.indexOf("dsq-reply-login")!=-1){c=a.id.slice(16);b=Dsq.$("dsq-reply-"+c)}else{b=Dsq.$("dsq-post-add")}if(a){if(a.className=="dsq-login-active"){Dsq.Iframes.showReplyIframeInContainerIfAllowed(b,c);a.className=""}else{Dsq.Iframes.showLoginIframeInContainer(b,c);a.className="dsq-login-active"}}else{Dsq.Iframes.showLoginIframeInContainer(b,c)}if(Dsq.Utils.browser.ie){Dsq.Utils.fixIframesIE()}};this.paginate=function(c,d,a){var b="";if(typeof a=="undefined"){a=null}if(typeof disqus_per_page!="undefined"&&a===null){a=disqus_per_page}if(typeof disqus_sort!="undefined"){b+="&sort="+disqus_sort}if(a!==null){b+="&per_page="+a}Dsq.$("dsq-pagination").innerHTML+='<img src="'+Dsq.jsonData.settings.media_url+'/images/loading-small.gif">';if(d){d.style.display="none"}Dsq.Utils.execScript(Dsq.jsonData.settings.disqus_url+Dsq.Urls.EMBED_THREAD+"?slug="+Dsq.jsonData.thread.slug+"&p="+c+b)};this.sortBy=function(b){var a=document.createElement("script");var c=new Date();if(location.hash!==""){location.hash="#disqus_thread"}if(typeof(disqus_url)=="undefined"){disqus_url=disqus_href}a.type="text/javascript";a.src=Dsq.jsonData.settings.disqus_url+Dsq.Urls.EMBED_THREAD+"?slug="+Dsq.jsonData.thread.slug+"&sort="+b+"&title=&"+c.getTime();Dsq.$("dsq-comments").innerHTML='<img src="'+Dsq.jsonData.settings.media_url+'/images/loading.gif">';Dsq.container.appendChild(a)};this.subscribe=function(a,b){if(Dsq.jsonData.request.is_authenticated||b){if(b){Dsq.Popup._closePopup(null,true)}Dsq.Utils.execScript(Dsq.jsonData.settings.disqus_url+Dsq.Urls.EMBED_SUBSCRIBE+"?status="+a+"&slug="+Dsq.jsonData.thread.slug+"&email="+encodeURIComponent(b))}else{if(!b){var d=Dsq.$t("Subscribe to this comment thread");var c=""+Dsq.$t("New comments will be sent directly to your email inbox!")+' <div class="dsq-subscribe-submit"> <p><strong>'+Dsq.$t("Enter your email address below.")+'</strong></p> <input type="text" id="dsq-subscribe-email"> <button type="button" onclick="Dsq.Thread.subscribe(1, Dsq.$(\'dsq-subscribe-email\').value)">'+Dsq.$t("Subscribe")+"</button> </div>";Dsq.Popup.popModal(c,d)}}};this.showSettings=function(){if(!Dsq.jsonData.request.is_moderator){return}var a='<div class="dsq-moderate-options"> <span id="dsq-thread-settings-status" class="dsq-options-status"></span> <table class="dsq-moderator-settings"> <tr> <td><strong>Automatic Closing</strong></td> <td>Do not allow comments after <input size="3" id="dsq-thread-days-alive" value="'+Dsq.jsonData.thread.days_alive+'" type="text" /> days. Using 0 days will disable this feature.<br /><br /> <p class="dsq-form-actions"><button type="button" onclick="Dsq.Thread.updateDaysAlive();" class="dsq-button-small"><span>Save</span></button></p> </td> </tr><tr><td class="last"><strong>Moderate all comments</strong></td> <td class="last"><input type="radio" id="dsq-thread-moderate-all" name="moderate_all_comments" value="1" '+(Dsq.jsonData.thread.moderate_all?'checked="true"':"")+' /><label><strong>Yes</strong>, moderators must approve all comments before they are published.</label> <br/><br/><input type="radio" name="moderate_all_comments" value="0" '+(Dsq.jsonData.thread.moderate_all?"":'checked="true"')+' /><label><strong>No</strong>, comments don\'t need to be approved before they are published.<label><p class="dsq-form-actions"><button type="button" onclick="Dsq.Thread.updateModerateAll();" class="dsq-button-small"><span>Save</span></button></p> </td> </tr></table></div>Go to the main <a href="'+Dsq.jsonData.settings.disqus_url+"/comments/settings/"+Dsq.jsonData.forum.url+'" target="_blank">settings page</a> for more options.';Dsq.Popup.popModal(a,"Settings")};this.showModeratorActions=function(){if(!Dsq.jsonData.request.is_moderator){return}var a='<div class="dsq-moderate-options"><table><tr><td>'+Dsq.Strings.get("Actions")+"</td><td><ul>";a+='<li><a href="#" onclick="Dsq.Thread.toggleClosed(); return false;">'+(Dsq.jsonData.thread.closed?Dsq.Strings.get("Open thread"):Dsq.Strings.get("Close thread"))+"</a></li>";a+='<li><a href="#" onclick="Dsq.Thread.toggleKilled(); return false;">'+(Dsq.jsonData.thread.killed?Dsq.Strings.get("Restore thread"):Dsq.Strings.get("Remove thread"))+"</a></li>";a+='</ul></td></tr></table></div><p>Go to the full <a href="'+Dsq.jsonData.settings.disqus_url+"/comments/moderate-threads/"+Dsq.jsonData.forum.url+'" target="_blank">moderate panel</a> for more options.</p>';Dsq.Popup.popModal(a,Dsq.Strings.get("Moderate Options"))};this.showHelp=function(){if(!Dsq.jsonData.request.is_moderator){return}var a='<ul class="dsq-thread-help">';if(Dsq.jsonData.forum.reactions_enabled){a+='<li><a href="#" onclick="Dsq.Reaction.reportMissingReactions(); return false;">'+Dsq.Strings.get("Report missing reactions")+"</a><p>Are you expecting Reactions for this thread, but do not see them? Select this option to tell the system to search again.</p> </li>"}a+='<li> <a href="'+Dsq.jsonData.settings.disqus_url+'/help/" target="_blank">'+Dsq.Strings.get("Contact Support")+"</a> <p>For any other issues, please let us know.</p> </li>";a+="</ul>";Dsq.Popup.popModal(a,Dsq.Strings.get("Help"))};this.showMediaEmbed=function(){var g='<div id="dsq-media-embed-%(post)s" class="dsq-media-embed"><h4>Attached files</h4></div>';var f='<a id="dsq-media-embed-thumbnail-%(id)s" href="#" onclick="Dsq.Thread.expandMediaEmbed(%(pos)s); return false;"><img src="%(imgurl)s" style="width:75px;height:75px;"/></a>';var d=function(j){var i=document.getElementById("dsq-media-embed-"+j);if(i){return i}var h=document.getElementById("dsq-comment-body-"+j);if(h){h.innerHTML+=Dsq.Utils.interpolate(g,{post:j});return d(j)}return null};for(var b=0;b<Dsq.jsonData.mediaembed.length;b++){var e=Dsq.jsonData.mediaembed[b];if(!document.getElementById("dsq-media-embed-thumbnail-"+e.id)){var c=d(e.post);var a=Dsq.jsonData.media_url+"/images/mediaembed-thumbnail.png";if(c){switch(e.type){case 1:if(e.metadata.thumbnail){a=Dsq.jsonData.settings.uploads_url+"/"+e.metadata.thumbnail+"/cached75.jpg"}break;case 2:case 4:if(e.metadata.thumbnail){a=e.metadata.thumbnail}}c.innerHTML+=Dsq.Utils.interpolate(f,{id:e.id,pos:b,imgurl:a})}}}};this.expandMediaEmbed=function(d){var a='<div style="width:480px;height:385px;"><object width="480" height="385"><param name="movie" value="http://www.youtube.com/v/%(videoid)s&hl=en_US&fs=1&"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/%(videoid)s&hl=en_US&fs=1&" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="480" height="385"></embed></object></div>';var c=Dsq.jsonData.mediaembed[d];var b="";switch(c.type){case 1:b='<p><img src="'+c.location+'" onload="Dsq.Popup.position();" /></p>';b+='<p><a href="'+c.location+'" target="_blank">Original</a></p>';break;case 2:b=Dsq.Utils.interpolate(a,{videoid:c.location});break;case 4:b='<p><img src="'+c.metadata.medium+'" onload="Dsq.Popup.position();" /></p>';b+='<p><a href="'+c.metadata.url+'" target="_blank">Original</a></p>'}Dsq.Popup.popModal(b,"Attached file",null,true,"dsq-media-embed")};this.updateDaysAlive=function(){var b=Dsq.$("dsq-thread-days-alive").value;var a=Dsq.$("dsq-thread-settings-status");Dsq.Utils.postToUrl(Dsq.jsonData.settings.disqus_url+Dsq.Urls.UPDATE_DAYS_ALIVE,{days:b,thread:Dsq.jsonData.thread.id});a.innerHTML="Saved!";window.setTimeout(function(){a.innerHTML=""},1000)};this.updateModerateAll=function(){var b=(Dsq.$("dsq-thread-moderate-all").checked?1:0);var a=Dsq.$("dsq-thread-settings-status");Dsq.Utils.postToUrl(Dsq.jsonData.settings.disqus_url+Dsq.Urls.UPDATE_MODERATE_ALL,{value:b,thread:Dsq.jsonData.thread.id});a.innerHTML="Saved!";window.setTimeout(function(){a.innerHTML=""},1000)};this.toggleClosed=function(){Dsq.Utils.postToUrl(Dsq.jsonData.settings.disqus_url+Dsq.Urls.TOGGLE_THREAD_CLOSED,{thread:Dsq.jsonData.thread.id});window.setTimeout(function(){window.location.reload()},500)};this.toggleKilled=function(){Dsq.Utils.postToUrl(Dsq.jsonData.settings.disqus_url+Dsq.Urls.TOGGLE_THREAD_KILLED,{thread:Dsq.jsonData.thread.id});window.setTimeout(function(){window.location.reload()},500)}};Dsq.Thread=new Dsq.Thread();var Dsq;if(typeof Dsq==="undefined"){Dsq={}}Dsq.Events=function(){var c={};var a={};var b=function(d){if(a[d]===undefined){a[d]=[]}return a[d]};c.REPLY_IFRAME_CREATED=1;c.REPLY_IFRAME_TOGGLED=2;c.fire=function(f,d){if(!f){throw new Error("Unknown event")}var g=d||{};for(var e=0;e<b(f).length;e++){b(f)[e](g)}};c.addHandler=function(d,e){b(d).push(e)};return c}();var Dsq;if(typeof Dsq==="undefined"){Dsq={}}Dsq.Realtime=function(){var h=false;var a=null;var d=Dsq.jsonData.request.timestamp;var b=[];var c=false;var g=null;function f(){var k=Dsq.Utils.getElementsByClassName(Dsq.$("dsq-content"),"div","dsq-realtime-alert");for(var j=0;j<k.length;j++){k[j].style.display=b.length?"block":"none";k[j].innerHTML=b.length+" new "+Dsq.Utils.pluralize(b.length,"comment","comments")+Dsq.Utils.pluralize(b.length," was"," were")+" just posted.";k[j].innerHTML+=' <a href="#" onclick="Dsq.Realtime.show(); return false">('+Dsq.Strings.get("Show")+")</a>"}}function e(){var j=null;var l=Dsq.$("dsq-sort-select").value==="oldest"?-1:null;for(var k=0;k<b.length;k++){j=b[k];Dsq.Post.insert(l,j,Dsq.jsonData.posts[j].message);Dsq.Post.incrementPostCount();Dsq.Post.outlineComment(j)}b=[]}this.enableInterval=function(){a=setInterval(Dsq.Realtime.check,Dsq.jsonData.context.realtime_speed);Dsq.$("dsq-realtime-status").innerHTML=Dsq.Strings.get("enabled");Dsq.$("dsq-realtime-toggle").innerHTML="("+Dsq.Strings.get("Pause")+")"};this.disableInterval=function(){if(a){clearInterval(a);a=null}Dsq.$("dsq-realtime-status").innerHTML=Dsq.Strings.get("paused");Dsq.$("dsq-realtime-toggle").innerHTML="("+Dsq.Strings.get("Resume")+")"};this.toggleInterval=function(){if(!a){Dsq.Realtime.enableInterval()}else{Dsq.Realtime.disableInterval()}return false};this.initialize=function(){if(!h){h=true;Dsq.$("dsq-realtime-toggle").onclick=this.toggleInterval;if(!Dsq.jsonData.forum.streaming_realtime){f()}if(Dsq.jsonData.thread.realtime_rate===0||Dsq.jsonData.realtime_paused){Dsq.Realtime.disableInterval()}else{Dsq.Realtime.enableInterval()}}};this.show=function(){e();f();return false};this.check=function(){if(!c&&Dsq.jsonData.realtime_enabled){if(g&&g.parentNode){g.parentNode.removeChild(g)}c=true;g=Dsq.Utils.execScript(Dsq.jsonData.settings.disqus_url+Dsq.Urls.REALTIME+"?timestamp="+d)}};this.update=function(l,k,m){c=false;d=l;if(m){for(var i in m){if(m.hasOwnProperty(i)){if(!Dsq.jsonData.users[i]){Dsq.jsonData.users[i]=m[i]}}}}if(k){for(var j in k){if(k.hasOwnProperty(j)){if(!Dsq.jsonData.posts[j]){Dsq.jsonData.posts[j]=k[j];b.push(j)}}}if(Dsq.jsonData.forum.streaming_realtime){e()}else{f()}}}};Dsq.Realtime=new Dsq.Realtime();var Dsq;if(typeof Dsq==="undefined"){Dsq={}}Dsq.Iframes=function(){var a={};var b=function(c,k,d){var g=false;for(var e=0;e<c.childNodes.length;e++){var j=c.childNodes[e];if(j.nodeName=="IFRAME"){if(j.id==k){j.style.display="block";g=true}else{j.style.display="none"}}}if(g){return undefined}var h=document.createElement("div");h.innerHTML=d;var f=h.childNodes[0];h.removeChild(f);c.appendChild(f);return f};a.makeReplyIframeId=function(d,c){var e="dsq-post-add-iframe";if(c){e+="-"+c}if(d){e+="-"+d}return e};a.makeLoginIframeId=function(c){if(!c){return"dsq-login-iframe"}return"dsq-login-iframe-"+c};a.makeReplyIframeName=function(e,d){var c="dsq-reply-frame";if(d){c+="-"+d}if(e){c+="-"+e}return c};a.showReplyIframeInContainer=function(d,l,j,i){var f=j||{};var e=Dsq.Iframes.makeReplyIframeId(l,f.xtype);var c=Dsq.Iframes.makeReplyIframeName(l,f.xtype);var h={id:e,name:c,"class":i||"dsq-post-reply"};var k=Dsq.Templates.frameReply(l,j,h);var g=b(d,e,k);if(g){Dsq.Events.fire(Dsq.Events.REPLY_IFRAME_CREATED,{postId:l,node:g,xtype:f.xtype})}};a.showLoginIframeInContainer=function(c,e){var f=Dsq.Iframes.makeLoginIframeId(e);var d=Dsq.Templates.frameLogin({id:f});b(c,f,d)};a.showReplyIframeInContainerIfAllowed=function(c,d){if(Dsq.jsonData.context.show_reply){a.showReplyIframeInContainer(c,d)}else{a.hideAllInContainer(c)}};a.hideAllInContainer=function(c){for(var d=0;d<c.childNodes.length;d++){var e=c.childNodes[d];if(e.nodeName=="IFRAME"){e.style.display="none"}}};return a}();var Dsq;if(typeof Dsq==="undefined"){Dsq={}}Dsq.Twitter=function(){var a=this;this.startTwitterConnect=function(){var b="location=0,status=0,width=800,height=400";a._twitterWindow=window.open(Dsq.jsonData.settings.disqus_url+"/_ax/twitter/begin/","twitterWindow",b);a._twitterInterval=window.setInterval(a.completeTwitterConnect,1000)};this.completeTwitterConnect=function(){if(a._twitterWindow.closed){window.clearInterval(a._twitterInterval);window.location.reload()}}};Dsq.Twitter=new Dsq.Twitter();Dsq.Yahoo=function(){var a=this;this.startYahooConnect=function(){var b="location=0,status=0,width=800,height=400";a._yahooWindow=window.open(Dsq.jsonData.settings.disqus_url+"/_ax/yahoo/begin/","yahooWindow",b);a._yahooInterval=window.setInterval(a.completeYahooConnect,1000)};this.completeYahooConnect=function(){if(a._yahooWindow.closed){window.clearInterval(a._yahooInterval);window.location.reload()}}};Dsq.Yahoo=new Dsq.Yahoo();Dsq.OpenID=function(){var a=this;this.requestURL=function(){var b='<table class="dsq-openid-form"><tr><td style="vertical-align:top;" rowspan="2"><img src="'+Dsq.jsonData.settings.media_url+'/images/openid-icon-100x100.png" /></td><td><label for="dsq-openid-url">OpenID URL:</label></td><td><input type="text" id="dsq-openid-url" /></td></tr><tr><td><label for="dsq-openid-username">Display name:</label></td><td><input type="text" id="dsq-openid-username" /></td></tr><tr><td class="dsq-openid-submit" colspan="3"><input type="button" value="Sign in" onclick="Dsq.OpenID.startConnect();" /></td></tr></table>';Dsq.Popup.popModal(b,"Sign in using OpenID")};this.startConnect=function(){var c=function(g){return(/^\s*$/.test(g))};var e=Dsq.$("dsq-openid-url").value;var f=Dsq.$("dsq-openid-username").value;if(c(e)){return}var d="location=0,status=0,width=800,height=500";var b=Dsq.jsonData.settings.disqus_url+"/_ax/openid/begin/?url="+encodeURIComponent(e)+"&username="+encodeURIComponent(f);a._openidWindow=window.open(b,"openidWindow",d);a._openidInterval=window.setInterval(a.completeConnect,1000)};this.completeConnect=function(){if(a._openidWindow.closed){window.clearInterval(a._openidInterval);window.location.reload()}}};Dsq.OpenID=new Dsq.OpenID();Dsq.Reaction=function(){var a=this;this.hide=function(b){Dsq.Utils.execScript(Dsq.jsonData.settings.disqus_url+Dsq.Urls.EMBED_HIDEREACTION+"?reaction_id="+b)};this.reportMissingReactions=function(){if(!Dsq.jsonData.request.is_moderator||!Dsq.jsonData.forum.reactions_enabled){return}if(Dsq.jsonData.thread.queued){Dsq.Popup.popModal("Your report has been received. The system will automatically search for new reactions; if any are found, they will be displayed on this comment thread.<br/><br/>Thank&nbsp;you.","Reported missing reactions");return}Dsq.Utils.execScript(Dsq.jsonData.settings.disqus_url+Dsq.Urls.EMBED_QUEUEURL)}};Dsq.Reaction=new Dsq.Reaction();Dsq.CNN=function(){var a={};a.authenticate=function(){var b=Dsq.jsonData.settings.disqus_url+Dsq.Urls.SAML_CNN_TRY;Dsq.Utils.postToUrl(b,{target:document.location},true)};return a}();var Dsq;if(typeof Dsq=="undefined"){Dsq={}}Dsq.Core=function(){this.afterDOM=function(h){if(Dsq.jsonData.request.page==1&&Dsq.jsonData.request.is_initial_load){Dsq.container.innerHTML=Dsq.Templates.header()+Dsq.container.innerHTML+Dsq.Templates.footer()}Dsq.$(Dsq.curPageId).innerHTML=Dsq.$(Dsq.curPageId).innerHTML.replace(Dsq.COMMENTS_RE,Dsq.CommentsHandler);Dsq.Utils.gebiFromElementCollectionCache=null;if(Dsq.jsonData.request.is_initial_load){var b=document.getElementById(disqus_container_id);var f=document.getElementsByTagName("a")[0];Dsq.Thread.fc=Dsq.Utils.getStyle(b,"color");if(f){Dsq.Thread.ac=Dsq.Utils.getStyle(f,"color")}Dsq.Thread.ff=Dsq.Utils.getStyle(b,(Dsq.Utils.browser.ie||window.opera?"fontFamily":"font-family"));Dsq.Thread.ff=Dsq.Thread.ff.replace(/['"]/g,"");Dsq.Thread.fc=encodeURIComponent(Dsq.Thread.fc);Dsq.Thread.ac=encodeURIComponent(Dsq.Thread.ac);Dsq.Thread.ff=encodeURIComponent(Dsq.Thread.ff);if(h){Dsq.Thread.toggleReply=function(i,g){document.getElementById("dsq-reply-"+g).innerHTML="The site owner has blocked you from making new posts."};Dsq.Thread.editPost=Dsq.Thread.toggleReply}if(Dsq.$(Dsq.Templates.addPostContainer)){if(window.disqus_use_postmessage){Dsq.frames.reply_0=new Dsq.ReplyFrame(Dsq.$(Dsq.Templates.textareaContainer));Dsq.frames.reply_0.init(function(){Dsq.$(Dsq.Templates.addPostContainer).innerHTML="";var g=(typeof disqus_frame_theme=="undefined")?"default":disqus_frame_theme;Dsq.Iframes.showReplyIframeInContainer(Dsq.$(Dsq.Templates.addPostContainer),null,{theme:g})})}else{Dsq.Iframes.showReplyIframeInContainer(Dsq.$("dsq-post-add"))}}if(document.location.hash!==""){document.location.hash=document.location.hash.substring(1)}Dsq.Popup.showCookieMsgs();if(document.location.search!==""&&location.hash!=="#disqus_thread"){var d=Dsq.Utils.getRequestParams().dsq;if(d){document.location.hash="comment-"+d}}if((typeof OB_Script!="undefined")&&(typeof OB_versionNum!="undefined")){if(navigator.userAgent.indexOf("Firefox")!=-1){if(window.frames["dsq-reply-frame"]){window.frames["dsq-reply-frame"].location=Dsq.Urls.REPLY+(new Date()).getTime()+"&f="+Dsq.jsonData.forum.url+"&t="+Dsq.jsonData.thread.slug+"&to_redirect="+encodeURIComponent(window.location)+"&ifrs="+encodeURIComponent(disqus_iframe_css)}}}if(Dsq.jsonData.integration.theme==4){if(Dsq.jsonData.realtime_enabled){Dsq.Realtime.initialize()}}}Dsq.Thread.showMediaEmbed();if(typeof(disqus_callback)=="function"){var c=(Dsq.Utils.getRequestParams()).dsq_cbp||null;try{disqus_callback(c)}catch(a){if(typeof(console)!="undefined"&&typeof(console.log)=="function"){console.log(a)}}Dsq.container=document.getElementById("dsq-content")}if(Dsq.jsonData.integration.theme==4){var e=Dsq.Utils.browser.ie?document:window;Dsq.Utils.addEventListener(e,"keydown",function(i){if((i.keyCode||i.which)==13){var j=Dsq.Utils.browser.ie?i.srcElement:i.target;if(j.nodeType==3){j=j.parentNode}if(j.nodeName=="INPUT"&&j.parentNode.className=="dsq-input-wrapper"){var g=Dsq.Utils.extractId(j);Dsq.Templates.postComment(g,this,false)}}})}};this.initializeFacebook=function(){var c=function(){return window.FB&&FB.init};if(!c()){if(window.Dsq&&Dsq.container){var b=document.createElement("div");b.id="FB_HiddenContainer";b.style.position="absolute";b.style.top="-10000px";b.style.left="-10000px";b.style.width="0px";b.style.height="0px";Dsq.container.appendChild(b)}var a=document.createElement("script");a.type="text/javascript";a.src="http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php";document.getElementsByTagName("head")[0].appendChild(a);ExecuteWhen.add(c,function(){var d=Dsq.jsonData.context.forum_facebook_key;if(typeof disqus_facebook_api_key!="undefined"){d=disqus_facebook_api_key}FB.init(d,window.facebookXdReceiverPath||null,{fetchSignedPublicSessionData:true})})}if(Dsq.jsonData.integration.theme!=4){ExecuteWhen.add(c,function(){FB.ensureInit(function(){DisqusFbcParentController.init();FB.Connect.ifUserConnected(DisqusFbcParentController.onLogin)})})}};this.loadSeesmic=function(){var b,d;if(typeof b=="undefined"){b={}}b.widget=function(){this.callback=function(e){d=e.disqusplayer}};b.widget=new b.widget();var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src","http://seesmic.com/version.js?callback=seesmic.widget.callback");document.getElementsByTagName("head")[0].appendChild(a);a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src",Dsq.jsonData.settings.media_url+"/javascript/library/swfobject.js");document.getElementsByTagName("head")[0].appendChild(a);function c(e,k){var f,j,l,i;var g=!!d?d:"http://seesmic.com/embeds/StandalonePlayer.swf";f=Dsq.$(e+"_content");j=Dsq.$("dsq-seesmic-"+e+"_preview");l=Dsq.$("dsq-seesmic-"+e+"_hide");i=Dsq.$("dsq-seesmic-"+e+"_show");if(k){var h=new SWFObject(g,"sotester","300","270","9","#000000");h.addVariable("video",e);h.addParam("allowFullScreen","true");h.addParam("allowScriptAccess","always");h.useExpressInstall("swfobject/expressinstall.swf");h.write(e+"_content");j.style.display="none";l.style.display="block";i.style.display="none"}else{f.innerHTML="";j.style.display="block";l.style.display="none";i.style.display="block"}}window.seesmic=b};this.loadTheme=function(){if(Dsq.jsonData.integration.theme==4){var a="narcissus";window.disqus_use_postmessage=true;for(var b in Dsq.Themes[a]){if(Dsq.Themes[a]&&Dsq.Themes[a].hasOwnProperty(b)){Dsq.Templates[b]=Dsq.Themes[a][b]}}for(b in Dsq.Post){if(Dsq.Themes[a]&&Dsq.Themes[a].hasOwnProperty(b)){if(!Dsq.Utils.browser.opera||b!="edit"){Dsq.Post[b]=Dsq.Themes[a][b]}}}}Dsq.Templates.registerTemplate("authPost",Dsq.Templates.authPost);Dsq.Templates.registerTemplate("header",Dsq.Templates.header);Dsq.Templates.registerTemplate("footer",Dsq.Templates.footer);Dsq.Templates.registerTemplate("trackbacks",Dsq.Templates.trackbacks);Dsq.Templates.registerTemplate("reactions",Dsq.Templates.reactions);Dsq.Templates.registerTemplate("prependPost",Dsq.Templates.prependPost);Dsq.Templates.registerTemplate("appendPost",Dsq.Templates.appendPost);Dsq.Templates.registerTemplate("postPrependHeader",Dsq.Templates.postPrependHeader);Dsq.Templates.registerTemplate("postAppendHeader",Dsq.Templates.postAppendHeader);Dsq.Templates.registerTemplate("preBody",Dsq.Templates.preBody);Dsq.Templates.registerTemplate("postBody",Dsq.Templates.postBody);Dsq.Templates.registerTemplate("postFooter",Dsq.Templates.postFooter);Dsq.Templates.registerTemplate("_popupGeneric",Dsq.Templates._popupGeneric);Dsq.Templates.registerTemplate("voted",Dsq.Templates.voted);Dsq.Templates.registerTemplate("popupProfile",Dsq.Templates.popupProfile);Dsq.Templates.registerTemplate("postBox",Dsq.Templates.postBox);Dsq.Templates.registerTemplate("pagination",Dsq.Templates.pagination);Dsq.Templates.registerTemplate("postComment_onSuccess",Dsq.Templates.postComment_onSuccess);switch(Dsq.jsonData.integration.theme){case 4:Dsq.Utils.loadStylesheet("/styles/embed/narcissus.css");break;case 3:Dsq.Utils.loadStylesheet("/styles/embed/classic_b.css");break;default:Dsq.Utils.loadStylesheet("/styles/embed/classic_a.css")}};this.applyIE6Hack=function(){var a=/<div class="dsq-header-avatar"(.*?)>/gim;Dsq.Templates.registerFilter("postPrependHeader",function(c,b){function d(h,e,g,f){return'<div class="dsq-header-avatar" '+e+' onmouseout="Dsq.Post.dropProfile('+b+')">'}c=c.replace(a,d);return c})}};Dsq.Core=new Dsq.Core();var Dsq;if(typeof Dsq=="undefined"){Dsq={}}Dsq.Themes={};Dsq.Themes.narcissus=function(){this.addPostContainer="dsq-form-area";this.textareaContainer="dsq-textarea-wrapper";this.header=function(){var b="";var a;if(Dsq.jsonData.request.missing_perm){a=Dsq.Templates.missingPermissions();if(a){b+='<div class="dsq-missing-permissions">'+a+"</div>"}}b+='<div id="dsq-comments-title"><h3>'+Dsq.Templates.commentCount()+"</h3></div>";b+='<div class="dsq-options"><span class="dsq-item-sort">'+Dsq.Strings.get("Sort by")+' <select id="dsq-sort-select" onchange="Dsq.Thread.sortBy(this.value);"><option value="hot" '+(Dsq.jsonData.request.sort==4?'selected="selected"':"")+">"+Dsq.Strings.get("Popular now")+'</option><option value="best" '+(Dsq.jsonData.request.sort==3?'selected="selected"':"")+">"+Dsq.Strings.get("Best Rating")+'</option><option value="newest" '+(Dsq.jsonData.request.sort==2?'selected="selected"':"")+">"+Dsq.Strings.get("Newest first")+'</option><option value="oldest" '+(Dsq.jsonData.request.sort==1?'selected="selected"':"")+">"+Dsq.Strings.get("Oldest first")+'</option></select>&nbsp;</span><span class="dsq-subscribe-email"><img src="'+Dsq.jsonData.settings.media_url+'/images/embed/email.png" style="width:12px;height:12px;vertical-align:middle">&nbsp;<span id="dsq-subscribe">'+(Dsq.jsonData.context.subscribed?'<a href="#" onclick="Dsq.Thread.subscribe(0); return false">'+Dsq.Strings.get("Unsubscribe")+"</a>":'<a href="#" onclick="Dsq.Thread.subscribe(1); return false">'+Dsq.Strings.get("Subscribe by email")+"</a>")+'</span></span><span class="dsq-subscribe-rss" style="width:12px;height:12px;vertical-align:middle"><img src="'+Dsq.jsonData.settings.media_url+'/images/embed/bullet-feed.png" alt="" />&nbsp;<a href="'+Dsq.Urls.FORUM_VIEW+'/latest.rss">'+Dsq.Strings.get("Subscribe by RSS")+"</a></span></div>";if(!Dsq.jsonData.integration.reply_position){b+=Dsq.Templates.realtime();b+=Dsq.Templates.showThreadSettings();b=Dsq.Templates.postBox()+b}return b};this.footer=function(){var a="";a+=Dsq.Templates.pagination();if(Dsq.jsonData.integration.reply_position){a+=Dsq.Templates.realtime();a+=Dsq.Templates.showThreadSettings();a+=Dsq.Templates.postBox()}if(Dsq.jsonData.realtime_enabled&&!Dsq.jsonData.forum.streaming_realtime){a+='<div style="display: none" class="dsq-realtime-alert"></div>'}a+=Dsq.Templates.reactions();if(Dsq.jsonData.forum.linkbacks_enabled){a+=Dsq.Templates.trackbacks()}if(Dsq.jsonData.request.is_global_moderator){a+='<div class="dsq-global-moderator-extras" style="display:block;margin-top:10px"><strong>shortname:</strong> '+Dsq.jsonData.forum.url+"<strong>thread id:</strong> "+Dsq.jsonData.thread.id+"<strong>thread slug:</strong> "+Dsq.jsonData.thread.slug+"</div>"}return a};this.realtime=function(){var a="";if(Dsq.jsonData.realtime_enabled){a+='<div id="dsq-realtime-options" class="dsq-options">'+Dsq.Strings.get("Real-time updating is")+' <strong id="dsq-realtime-status" style="text-transform: lowercase">'+Dsq.Strings.get("enabled")+'</strong>. <a href="#" id="dsq-realtime-toggle" style="text-transform: capitalize"></a></div>'}if(!Dsq.jsonData.forum.streaming_realtime){a+='<div style="display: none" class="dsq-realtime-alert"></div>'}return a};this.showThreadSettings=function(){if(!Dsq.jsonData.request.is_moderator){return""}var a='<div id="dsq-thread-settings" class="dsq-thread-settings">'+Dsq.Strings.get("Moderator options")+': <a href="#" onclick="Dsq.Thread.showSettings(); return false;">'+Dsq.Strings.get("Settings")+'</a><a href="#" onclick="Dsq.Thread.showModeratorActions(); return false;">'+Dsq.Strings.get("Moderate")+'</a><a href="#" onclick="Dsq.Thread.showHelp(); return false;">'+Dsq.Strings.get("Help")+"</a></div>";return a};this.postBox=function(c,j){var e;var g=Dsq.jsonData.request.is_authenticated;if(!Dsq.jsonData.request.is_authenticated&&Dsq.jsonData.forum.disqus_auth_disabled&&!Dsq.jsonData.forum.allow_anon_post){return""}if(Dsq.jsonData.request.is_remote){if(!Dsq.jsonData.request.sharing.hasOwnProperty(Dsq.jsonData.request.remote_domain)){g=false}}if(c){var h=Dsq.jsonData.posts[c];var a=Dsq.jsonData.users[h.user_key]}var f=c?"-"+c:"";var d=function(){var l;var k=(Dsq.jsonData.request.email?true:false);l='<div class="dsq-request-user-info"> <!-- // If authenticated --><a href="'+Dsq.jsonData.settings.disqus_url+Dsq.Urls.LOGOUT+"?ctkn="+Dsq.CSRF_TOKEN+'" class="dsq-request-user-logout">'+Dsq.Strings.get("Logout")+'</a> <table><tr><td rowspan="2">'+(!Dsq.jsonData.forum.disqus_auth_disabled?'<a href="'+Dsq.jsonData.settings.disqus_url+Dsq.Urls.REQUEST_USER_PROFILE+'">':"")+'<img src="'+Dsq.Urls.REQUEST_USER_AVATAR+'" width="48" height="48" class="dsq-request-user-avatar">'+(!Dsq.jsonData.forum.disqus_auth_disabled?"</a>":"")+'</td><td class="dsq-request-user-name">'+(Dsq.jsonData.request.is_remote?'<span class="dsq-badge-small dsq-badge-'+Dsq.jsonData.request.remote_domain+'">'+Dsq.jsonData.request.remote_domain_name+"</span>":(Dsq.jsonData.request.is_verified?'<span class="dsq-badge-small dsq-badge-verified">'+Dsq.Strings.get("Verified")+"</span>":'<span class="dsq-badge-small dsq-badge-registered">'+Dsq.Strings.get("Registered")+"</span>"))+(!Dsq.jsonData.forum.disqus_auth_disabled?' <a href="'+Dsq.jsonData.settings.disqus_url+Dsq.Urls.REQUEST_USER_PROFILE+'">':"")+Dsq.jsonData.request.display_username+(!Dsq.jsonData.forum.disqus_auth_disabled?"</a>":"")+(Dsq.jsonData.request.is_remote&&k?' <small>(<a href="#" onclick="Dsq.Popup.remoteAccountSettings(); return false;">'+Dsq.Strings.get("change settings")+"</a>)</small>":"")+(!Dsq.jsonData.request.is_remote&&!Dsq.jsonData.forum.disqus_auth_disabled?' <small>(<a href="'+Dsq.jsonData.settings.disqus_url+'/profile/info/" target="_blank">'+Dsq.Strings.get("change name")+"</a> "+Dsq.Strings.get("or")+' <a href="'+Dsq.jsonData.settings.disqus_url+'/profile/avatar/" target="_blank">'+Dsq.Strings.get("picture")+"</a>)</small>":"")+'</td></tr><tr><td class="dsq-request-user-stats"><span class="dsq-request-user-stat dsq-request-user-stat-comments"><big>'+Dsq.jsonData.request.comments_count+'</big> <span id="dsq-request-user-stats-comments'+f+'">'+(Dsq.jsonData.request.comments_count==1?Dsq.Strings.get("comment"):Dsq.Strings.get("comments"))+'</span></span><span class="dsq-request-user-stat dsq-request-user-stat-liked"><big>'+Dsq.jsonData.request.likes_count+'</big> <span id="dsq-request-user-stats-liked'+f+'">'+(Dsq.jsonData.request.likes_count==1?Dsq.Strings.get("like"):Dsq.Strings.get("likes"))+'</span></span><span class="dsq-request-user-stat dsq-request-user-stat-points"><big>'+Dsq.jsonData.request.points+'</big> <span id="dsq-request-user-stats-points'+f+'">'+(Dsq.jsonData.request.points==1?Dsq.Strings.get("point"):Dsq.Strings.get("points"))+"</span> </span></td></tr></table></div>";return l};var b=function(){var k='<div id="dsq-authenticate'+f+'" class="dsq-authenticate"><p class="dsq-autheneticate-copy">'+(Dsq.jsonData.forum.allow_anon_post?Dsq.Strings.get("You are commenting as a")+' <a class="dsq-help" title="Click for more information" href="#" onclick="Dsq.Popup.helpBadges(); return false">'+Dsq.Strings.get("Guest")+"</a>. "+Dsq.Strings.get("Optional")+": "+Dsq.Strings.get("Login below")+".":Dsq.Strings.get("Required")+": "+Dsq.Strings.get("Please login below to comment")+".")+'</p><ul class="dsq-login-buttons">'+(!Dsq.jsonData.forum.disqus_auth_disabled?'<li class="dsq-login-button"><a href="#" onclick="Dsq.Popup.login(); return false"><img src="'+Dsq.jsonData.settings.media_url+'/images/themes/narcissus/login-disqus.gif" /></a></li>':"")+(Dsq.jsonData.context.use_fb_connect?'<li class="dsq-login-button"><a href="#" onclick="Dsq.Facebook.login(); return false;"><img src="'+Dsq.jsonData.settings.media_url+'/images/themes/narcissus/login-facebook.gif" /></a></li>':"")+(Dsq.jsonData.context.use_twitter_signin?'<li class="dsq-login-button"><a href="#" onclick="Dsq.Twitter.startTwitterConnect(); return false"><img src="'+Dsq.jsonData.settings.media_url+'/images/themes/narcissus/login-twitter.gif" /></a></li>':"")+(Dsq.jsonData.context.use_openid?'<li class="dsq-login-button"><a href="#" onclick="Dsq.OpenID.requestURL(); return false" ><img src="'+Dsq.jsonData.settings.media_url+'/images/themes/narcissus/login-openid.gif" /></a></li>':"")+(Dsq.jsonData.context.use_yahoo?'<li class="dsq-login-button"><a href="#" onclick="Dsq.Yahoo.startYahooConnect(); return false"><img src="'+Dsq.jsonData.settings.media_url+'/images/themes/narcissus/login-yahoo.png" /></a></li>':"")+"</ul></div>";return k};var i=function(){var l="";for(var m in Dsq.jsonData.request.sharing){if(Dsq.jsonData.request.sharing.hasOwnProperty(m)){var k=Dsq.jsonData.request.sharing[m];if(k){var n=k.auto===true||(Dsq.jsonData.request.remote_domain==m);var o=(m=="twitter"||m=="facebook");if(k.enabled){l+='<div><input type="checkbox" id="dsq-sharing-'+m+f+'" '+(n?"checked=true":"")+(o?'onclick="Dsq.Templates.updateSharingLabel(this, '+c+')"':"")+' />&nbsp;<label for="dsq-sharing-'+m+f+'"><img src="'+Dsq.jsonData.settings.media_url+"/images/v3/icon/16/"+m+'.png"> '+Dsq.Strings.get("Share on")+" <span>"+m+"</span></label></div>"}}}}l+=(Dsq.jsonData.request.is_remote?"":'<div><a href="'+Dsq.jsonData.settings.disqus_url+'/profile/connections/" target="_blank" class="dsq-configure-options">'+Dsq.Strings.get("Configure options")+"...</a></div>");return l};if(!Dsq.jsonData.context.show_reply){if(!Dsq.jsonData.request.is_authenticated){return'<div id="dsq-form-area" style="display:none"><div id="dsq-textarea-wrapper"></div></div>'+b()}else{return""}}e='<div id="'+(c?"dsq-reply-post-"+c:"dsq-new-post")+'" class="dsq-post-area"><div class="dsq-dc-logo"><a href="http://disqus.com/comments" target="_blank"><img src="'+Dsq.jsonData.settings.media_url+'/images/themes/narcissus/disqus-logo.png"></a></div><h3>'+(c?Dsq.Strings.get("Replying to")+" "+a.display_name:Dsq.Strings.get("Add New Comment"))+"</h3>"+(Dsq.jsonData.request.is_authenticated?d():b())+'<div id="dsq-form-area'+f+'"><div class="dsq-textarea"><div class="dsq-textarea-wrapper" id="dsq-textarea-wrapper'+f+'"></div></div>'+(!Dsq.jsonData.request.is_authenticated?'<div class="dsq-post-fields"><table><tr><td class="dsq-post-fields-left"><div class="dsq-input-wrapper"><input id="dsq-field-name'+f+'" type="text" value="'+(disqus_def_name?disqus_def_name:(Dsq.jsonData.session.name?Dsq.jsonData.session.name:Dsq.Strings.get("Name")+'" class="dsq-placeholder'))+'" onfocus="Dsq.Templates.handlePlaceholder(event, this, \'name\')" onblur="Dsq.Templates.handlePlaceholder(event, this, \'name\')" /></div></td><td class="dsq-post-fields-right"><div class="dsq-input-wrapper"><input id="dsq-field-website'+f+'" type="text" value="'+(Dsq.jsonData.session.url?Dsq.jsonData.session.url:Dsq.Strings.get("Website")+" ("+Dsq.Strings.get("Optional").toLowerCase()+')" class="dsq-placeholder')+'" onfocus="Dsq.Templates.handlePlaceholder(event, this, \'website\')" onblur="Dsq.Templates.handlePlaceholder(event, this, \'website\')" /></div></td></tr><tr><td class="dsq-post-fields-left"><div class="dsq-input-wrapper"><input id="dsq-field-email'+f+'" type="text" value="'+(disqus_def_email?disqus_def_email:(Dsq.jsonData.session.email?Dsq.jsonData.session.email:Dsq.Strings.get("Email")+'" class="dsq-placeholder'))+'" onfocus="Dsq.Templates.handlePlaceholder(event, this, \'email\')" onblur="Dsq.Templates.handlePlaceholder(event, this, \'email\')" /></div></td><td class="dsq-post-fields-right"><div class="dsq-subscribe-menu"><label class="dsq-subscribe-label"><input id="dsq-subscribe-on-post'+f+'" type="checkbox"'+(Dsq.jsonData.request.subscribe_on_post?'checked="true"':"")+"/> "+Dsq.Strings.get("Subscribe to all comments by email")+"</label></div></td></tr></table></div>":"")+'<div class="dsq-post-footer"><div class="dsq-sharing-options" '+(!g?'style="display:none;"':"")+">"+(Dsq.jsonData.request.is_remote?(g?i():""):'<button type="button" class="dsq-button-small" onfocus="document.getElementById(\'dsq-post-button'+f+'\').focus();"><span class="dsq-share-on">'+Dsq.Strings.get("Share on")+'&nbsp;<input id="dsq-sharing-twitter-label'+f+'" type="checkbox" disabled="true" '+(Dsq.jsonData.request.sharing.twitter&&Dsq.jsonData.request.sharing.twitter.auto?'checked="true"':"")+'/><img src="'+Dsq.jsonData.settings.media_url+'/images/v3/icon/16/twitter.png">&nbsp;&nbsp;<input id="dsq-sharing-facebook-label'+f+'" type="checkbox" disabled="true" '+(Dsq.jsonData.request.sharing.facebook&&Dsq.jsonData.request.sharing.facebook.auto?'checked="true"':"")+'/><img src="'+Dsq.jsonData.settings.media_url+'/images/v3/icon/16/facebook.png"> </span><span class="dsq-share-on-label">'+Dsq.Strings.get("Share this comment on")+'...</span></button><div class="dsq-panel">'+i()+"</div>")+'</div><button type="button" class="dsq-button" id="dsq-post-button'+f+'" onclick="Dsq.Templates.postComment('+c+', this, false)"><span>'+(Dsq.jsonData.forum.allow_anon_post||Dsq.jsonData.request.is_authenticated?Dsq.Strings.get("Post as")+" "+(Dsq.jsonData.request.display_username?Dsq.jsonData.request.display_username:Dsq.Strings.get("Guest")):Dsq.Strings.get("Login and Post"))+"</span></button>"+(c?'<button type="button" class="dsq-button" id="dsq-cancel-button'+f+'" onclick="Dsq.Post.toggleReply('+c+', this)"><span>'+Dsq.Strings.get("Cancel")+"</span></button>":"")+"</div></div></div>";return e};this.appendPost=function(a){var b='<div id="dsq-append-post-'+a+'"></div>';return b};this.postPrependHeader=function(b){var c=Dsq.jsonData.posts[b];var a=Dsq.jsonData.users[c.user_key];return'<table><tr><td id="dsq-header-avatar-'+b+'" class="dsq-header-avatar" onmouseover="Dsq.Post.dropProfile('+b+')"><a id="dsq-avatar-'+b+'" class="dsq-avatar" href="'+a.url+'" onclick="Dsq.Popup.popProfile('+b+'); return false;">'+(Dsq.jsonData.forum.show_avatar?'<img src="'+Dsq.jsonData.users[c.user_key].avatar+'" alt="" />':"")+'</a></td><td class="dsq-comment-header-meta">'};this.postAppendHeader=function(a){var d=Dsq.jsonData.posts[a];var b;var c="";if(d.parent_post_id){var e=Dsq.jsonData.posts[d.parent_post_id];if(e){var f=Dsq.jsonData.users[e.user_key];c=f.display_name}}b='<img src="'+Dsq.jsonData.settings.media_url+'/images/themes/narcissus/moderator.png" class="dsq-moderator-star" title="Moderator" /><span class="dsq-comment-header-time"><a href="#comment-'+a+'" onclick="Dsq.Popup.permalink('+a+')" title="Permalink">'+(d.is_realtime?Dsq.Strings.get("Just now"):d.date)+"</a></span> "+(d.parent_post_id&&c?'<a onclick="Dsq.Post.showParent('+d.parent_post_id+'); return false" href="#comment-'+d.parent_post_id+'" title="Jump to comment">'+Dsq.Strings.get("in reply to")+" "+c+"</a>":"")+"</td></tr></table>";b+=Dsq.Templates.showPostLikes(a);return b};this.showPostLikes=function(d){var e;var c=Dsq.jsonData.posts[d].points;var b=Dsq.jsonData.posts[d].user_voted;var a=(c>1);if(c<1){return""}if(Dsq.jsonData.integration.hide_user_votes||!b){e='<span id="dsq-like-pts-"'+d+'">'+c+" "+Dsq.Utils.pluralize(c,Dsq.Strings.get("person"),Dsq.Strings.get("people"))+"</span> "+Dsq.Strings.get("liked this")+"."}else{e='<a href="'+Dsq.jsonData.settings.disqus_url+"/"+b.username+'" target="_blank"><img src="'+b.avatar_url+'" alt="" /></a>'+(a?'<a href="#" onclick="Dsq.Templates.showUserVotes('+d+'); return false">':"")+(b.display_name?b.display_name:b.username)+'<span id="dsq-like-pts-'+d+'">'+(a?"&nbsp;"+Dsq.Utils.interpolate("and %(num)s more",{num:(c-1)}):"")+"</span> "+Dsq.Strings.get("liked this")+"."+(a?"</a>":"")}return'<div class="dsq-sub-header"><table><tr><td class="dsq-sub-header-right"><span class="dsq-user-like">'+e+"</span></td></tr></table></div>"};this.preBody=function(a){return""};this.postFooter=function(a){var b;var c=Dsq.jsonData.posts[a];if(c.killed||!c.approved){return""}b='<div class="dsq-comment-footer" id="dsq-comment-footer-'+a+'"><div class="dsq-comment-footer-left">'+(Dsq.jsonData.request.is_moderator?'<a href="#" onclick="Dsq.Templates.moderateOptions('+a+'); return false">'+Dsq.Strings.get("Moderate")+"</a>":"")+'<a href="#" id="dsq-post-report-'+a+'" class="dsq-post-report" onclick="Dsq.Post.report('+a+', false); return false;">'+Dsq.Strings.get("Flag")+"</a>"+(Dsq.jsonData.request.is_moderator?'<span class="dsq-highlight"><img id="dsq-highlight-'+a+'" src="'+Dsq.jsonData.media_url+"/images/v3/icon/16/"+(c.highlighted?"44.png":"44-grey.png")+'" onclick="Dsq.Post.highlightPost('+a+');"/></span>':"")+'</div><div class="dsq-comment-footer-right">'+(c.votable?'<span id="dsq-like-'+a+'" class="dsq-like">'+(!c.up_voted?'<button type="button" class="dsq-button-small" onclick="Dsq.Post.rate(this, '+a+', 1)" >'+Dsq.Strings.get("Like")+"</button>":Dsq.Strings.get("You liked this.")+"&nbsp;&nbsp;")+"</span>":"")+(c.can_reply&&!c.has_replies&&c.from_request_user?'<button type="button" class="dsq-button-small dsq-post-edit" onclick="Dsq.Post.edit(this, '+a+')" >'+Dsq.Strings.get("Edit")+"</button>":"")+(c.can_reply?'<span class="dsq-comment-footer-reply" id="dsq-comment-footer-reply-'+a+'" onclick="Dsq.Post.toggleReply('+a+', this)"><button type="button" class="dsq-button-small">'+Dsq.Strings.get("Reply")+'</button> <button type="button" class="dsq-comment-footer-reply-tab">'+Dsq.Strings.get("Reply")+"</button><span></span></span>":"")+"</div></div>";return b};this.showRetweets=function(b,e,c){var a,k="";for(var h=0;h<Dsq.jsonData.reactions.length;h++){var l=Dsq.jsonData.reactions[h];if(l.id==b){a=l.retweets}}if(a){if(e===0){e=a.length}for(var f=0;f<e;f++){var d=a[f];k+='<a href="'+d.url+'">'+d.author_name+"</a>"+((f===(e-1))?".":", ")}}if(c===undefined){return k}var g=document.getElementById(c);g.innerHTML=k;return g};this.showMoreReactions=function(k,p,b,g){var o=document.getElementById("dsq-show-more-reactions");var a=o.parentNode;a.removeChild(o);for(var h=0;h<k.length;h++){var m=k[h];var c=Dsq.Templates.generateReactionHTML(m);if(c){a.innerHTML+=c}}if(p){var n=Dsq.jsonData.settings.disqus_url;var j=Dsq.jsonData.forum.url;var r=Dsq.jsonData.thread.id;var u=b;var e=g;var q="Dsq.Utils.execScript('"+n+"/forums/"+j+"/more_reactions.js?t="+r+"&s="+u+"&l="+e+"', true); return false;";a.innerHTML+='<li id="dsq-show-more-reactions" class="dsq-show-more-reactions"><button type="button" class="dsq-button-small" onclick="'+q+'">Show more reactions</button></li>'}};this.generateReactionHTML=function(d){if(d.body===null||d.body===""){return null}if(d.author_name===""){d.author_name="&nbsp;"}if(d.url===""){d.url=d.get_service_url}var b='<li class="dsq-comment dsq-reaction" id="dsq-reaction-'+d.id+'"><div class="dsq-comment-header"><table><tr><td class="dsq-header-avatar">';if(d.author_url&&d.author_url!==""){b+='<a target="_blank" href="'+d.author_url+'" class="dsq-avatar">'}if(d.avatar_url&&d.avatar_url!==""){b+='<img src="'+d.avatar_url+'"/>'}else{b+='<img src="'+Dsq.jsonData.media_url+'/images/noavatar92.png"/>'}var e=(d.get_service_name=="trackback"||d.get_service_name=="pingback"?"rss":d.get_service_name.replace(" ",""));b+=(d.author_url&&d.author_url!==""?"</a>":"")+'</td><td><cite class="dsq-comment-cite">'+d.author_name+'</cite> <span class="dsq-comment-header-time">'+d.date_created+'</span></td><td class="dsq-comment-header-likes"></td></tr></table></div><div class="dsq-reaction-header"><table><tr><td class="dsq-reaction-header-left"><img class="dsq-service-icon" src="'+Dsq.jsonData.media_url+"/images/reactions/services/"+e+'.png" /> From <a class="dsq-service-name" target="_blank" href="'+d.url+'">'+d.get_service_name+'</a> via <a href="'+d.source_url+'">'+(d.source=="backtype"?"BackType":"UberVU")+'</a></td><td class="dsq-reaction-header-right">';if(d.retweets){var c=d.retweets.length;if(c>0){if(c==1){b+='One more retweet from <a href="'+d.retweets[0].url+'">'+d.retweets[0].author_name+"</a>"}else{b+=(c+" more retweets from ");b+='<span id="dsq-reaction-retweets-'+d.id+'">';var a=(c>3)?3:c;b+=Dsq.Templates.showRetweets(d.id,a);if(a!=c){b+='</span> <a onclick="Dsq.Templates.showRetweets('+d.id+", 0, 'dsq-reaction-retweets-"+d.id+'\'); this.parentNode.removeChild(this); return false;" href="#">'+Dsq.Strings.get("Show all")+"</a>"}}}}b+='</td></tr></table></div><div class="dsq-comment-body"><div class="dsq-comment-message">'+d.body+'</div></div><div class="dsq-comment-footer"><div class="dsq-comment-footer-left"></div>'+(Dsq.jsonData.request.is_moderator?'<div class="dsq-comment-footer-right"><button type="button" class="dsq-button-small dsq-hide-reaction" onclick="Dsq.Reaction.hide('+d.id+')">'+Dsq.$s("Hide")+"</button></div>":"")+"</div></li>";return b};this.reactions=function(){var c,g;if(Dsq.jsonData.reactions===undefined||Dsq.jsonData.reactions.length===0){return""}c="";for(var b=0;b<Dsq.jsonData.reactions.length;b++){g=Dsq.jsonData.reactions[b];var k=Dsq.Templates.generateReactionHTML(g);if(k){c+=k}}if(Dsq.jsonData.has_more_reactions){var h=Dsq.jsonData.settings.disqus_url;var e=Dsq.jsonData.forum.url;var m=Dsq.jsonData.thread.id;var n=Dsq.jsonData.reactions_start;var a=Dsq.jsonData.reactions_limit;var j="Dsq.Utils.execScript('"+h+"/forums/"+e+"/more_reactions.js?t="+m+"&s="+n+"&l="+a+"', true); return false;";c+='<li id="dsq-show-more-reactions" class="dsq-show-more-reactions"><button type="button" class="dsq-button-small" onclick="'+j+'">'+Dsq.Strings.get("Show more reactions")+"</button></li>"}return'<h3 id="dsq-reactions-title" class="dsq-h3-reactions">Reactions</h3><ul id="dsq-reactions" class="dsq-reactions">'+c+"</ul>"};this._popupGeneric=function(a){return'<div class="dsq-popup-container"><table><tbody><tr><td class="dsq-popup-tl"></td><td class="dsq-popup-b"></td><td class="dsq-popup-tr"></td></tr><tr><td class="dsq-popup-b"></td><td class="dsq-popup-body"><div class="dsq-popup-content"><div class="dsq-popup-title"><button type="button" class="dsq-button-small" style="float:right" onclick="Dsq.Popup._closePopup(null, true)">'+Dsq.Strings.get("Close")+"</button>"+a.header+"</div>"+a.body+'</div><div class="powered-by"><a href="'+Dsq.jsonData.settings.disqus_url+'/comments/">Powered by <img src="'+Dsq.jsonData.settings.media_url+'/images/embed/disqus-logo.png" alt="Disqus Comments" style="margin-bottom:-5px" /></a></div></td><td class="dsq-popup-b"></td></tr><tr><td class="dsq-popup-bl"></td><td class="dsq-popup-b"></td><td class="dsq-popup-br"></td></tr></tbody></table></div>'};this.getFormFields=function(g){var a={};var b=g?"-"+g:"";var f=Dsq.$("dsq-field-name"+b);var e=Dsq.$("dsq-field-email"+b);var d=Dsq.$("dsq-field-website"+b);var h=Dsq.$("dsq-field-username"+b);var c=Dsq.$("dsq-field-password"+b);a={name:f,email:e,website:d,username:h,password:c};return a};this.validateFields=function(e){if(Dsq.jsonData.request.is_authenticated){return true}var b=Dsq.Templates.getFormFields(e);var c=b.name;var f=b.website;var a=b.email;f.value=(f.value==Dsq.Templates.placeholder.website)?"":f.value;var d=[{validator:Dsq.Validators.name,value:c.value},{validator:Dsq.Validators.email,value:a.value},{validator:Dsq.Validators.url,value:f.value}];return Dsq.Validators.validate(d,function(g){Dsq.Popup.popModal(g,"Oops...")})};this.checkExistingUser=function(b){var a=Dsq.Templates.getFormFields(b);Dsq.Popup.loading(b);if(b){Dsq.frames["reply_"+b].getUserByEmail(a.email.value)}else{Dsq.frames.reply_0.getUserByEmail(a.email.value)}};this.validateAuth=function(g,d,e){var a=Dsq.Templates.getFormFields(d);var c=a.email?a.email.value:"";var f=a.username?a.username.value:"";var b=a.password?a.password.value:"";Dsq.Templates.setLoadingButton(g,d);if(d){Dsq.frames["reply_"+d].validateAuth(e,c,f,b)}else{Dsq.frames.reply_0.validateAuth(e,c,f,b)}};this.lightboxUpdateEmail=function(c,b){var a=Dsq.Templates.getFormFields(c);a.email.value=b};this.lightboxAuthenticate=function(c,h,i){var g,a;var b=c?"-"+c:"";if(typeof(i)=="undefined"){i=Dsq.Templates.getFormFields(c)}var f=i;switch(h){case"register":var e=f.name.value.replace(/[^a-zA-Z0-9]/g,"").toLowerCase();g=(Dsq.jsonData.forum.allow_anon_post?Dsq.Strings.get("Optional"):Dsq.Strings.get("Required"))+": ";g+=Dsq.Utils.interpolate(Dsq.Strings.get("Register a %(disqusprofile)s"),{disqusprofile:'<img src="'+Dsq.jsonData.settings.media_url+'/images/embed/disqus-profile.png" alt="'+Dsq.Strings.get("Disqus Profile")+'" />'});a='<ul class="dsq-lightbox-register-reasons"><li>'+Dsq.Strings.get("Verify your comments")+"</li><li>"+Dsq.Strings.get("Edit and delete comments")+"</li><li>"+Dsq.Strings.get("Manage comments and replies")+"</li></ul>";a+='<div class="dsq-lightbox-auth-fields"><table><tr><td>'+Dsq.Strings.get("Email")+'</td><td><input type="text" value="'+f.email.value+'" onchange="Dsq.Templates.lightboxUpdateEmail('+c+', this.value)" /><div id="dsq-email-errors'+b+'"></div></td></tr><tr><td>'+Dsq.Strings.get("Username")+'</td><td><input id="dsq-field-username'+b+'" type="text" value="'+e+'"/><div id="dsq-username-errors'+b+'"></div></td></tr><tr><td>'+Dsq.Strings.get("Password")+'</td><td><input id="dsq-field-password'+b+'" type="password" /><div id="dsq-password-errors'+b+'"></div></td></tr></table><div class="dsq-lightbox-switch-auth"><a href="#" onclick="Dsq.Templates.lightboxAuthenticate('+c+",'login'); return false\">"+Dsq.Strings.get("Login instead")+'</a></div></div><div id="dsq-lightbox-errors'+b+'" class="dsq-lightbox-errors"></div><div class="dsq-lightbox-submit"><div class="dsq-lightbox-auth-post"><button type="button" class="dsq-button" onclick="Dsq.Templates.validateAuth(this, '+c+",'"+h+"')\">"+Dsq.Strings.get("Register and Post comment")+"</button></div>"+(Dsq.jsonData.forum.allow_anon_post?'<div class="dsq-lightbox-auth-skip"><button type="button" class="dsq-button-small" onclick="Dsq.Templates.postComment('+c+', this, true)">'+Dsq.Strings.get("Just post as a Guest")+"</button></div>":"")+"</div>";break;case"login":g=(Dsq.jsonData.forum.allow_anon_post?Dsq.Strings.get("Optional"):Dsq.Strings.get("Required"))+": ";g+=Dsq.Utils.interpolate(Dsq.Strings.get("Login to your %(disqusprofile)s"),{disqusprofile:'<img src="'+Dsq.jsonData.settings.media_url+'/images/embed/disqus-profile.png" alt="'+Dsq.Strings.get("Disqus Profile")+'" />'});a="";if(f.avatar_url){a+='<div class="dsq-lightbox-recognized"><table><tr><td><img src="'+f.avatar_url+'" alt="" /></td><td><span class="dsq-badge '+(f.verified?"dsq-badge-verified":"dsq-badge-registered")+'">'+(f.verified?Dsq.Strings.get("Verified"):Dsq.Strings.get("Registered"))+"</span></td><td>"+Dsq.Utils.interpolate(Dsq.Strings.get("Hey %(displayname)s, is that you? Login below to claim this comment."),{displayname:"<strong>"+f.display_name+"</strong>"})+"</tr></table></div>"}a+='<div class="dsq-lightbox-auth-fields"><table><tr><td>'+Dsq.Strings.get("Username or Email")+'</td><td><input id="dsq-field-username'+b+'" type="text" value="'+(f.avatar_url?f.username:"")+'" /></td></tr><tr><td>'+Dsq.Strings.get("Password")+' (<a href="http://disqus.com/forgot" target="_blank">'+Dsq.Strings.get("cannot log in?")+'</a>)</td><td><input id="dsq-field-password'+b+'" type="password" /></td></tr></table><div class="dsq-lightbox-switch-auth"><a href="#" onclick="Dsq.Templates.lightboxAuthenticate('+c+",'register'); return false\">"+Dsq.Strings.get("Register instead")+'</a></div></div><div id="dsq-lightbox-errors'+b+'" class="dsq-lightbox-errors"></div><div class="dsq-lightbox-submit"><div class="dsq-lightbox-auth-post"><button type="button" class="dsq-button" onclick="Dsq.Templates.validateAuth(this, '+c+",'"+h+"')\">"+Dsq.Strings.get("Login and Post comment")+"</button></div>"+(Dsq.jsonData.forum.allow_anon_post?'<div class="dsq-lightbox-auth-skip"><button type="button" class="dsq-button-small" onclick="Dsq.Templates.postComment('+c+', this, true)">'+Dsq.Strings.get("Just post as a Guest")+"</button></div>":"")+"</div>";break;default:break}Dsq.Popup.lightbox(a,g,c);Dsq.$("dsq-field-username"+b).focus()};this.buttonsToRestore=[];this.setLoadingButton=function(e,c){var b=c?"-"+c:"";if(e){var a=document.createElement("button");a.id=e.id+"-loading";a.innerHTML='<img src="'+Dsq.jsonData.settings.media_url+'/images/loading-lite.gif" alt="" /> '+Dsq.Strings.get("Just a moment...");a.className=e.className+" dsq-post-loading";e.parentNode.appendChild(a);e.style.display="none";var g=Dsq.$("dsq-cancel-button"+b);if(g){g.style.display="none";this.buttonsToRestore.push(g)}this.buttonsToRestore.push(e)}else{var f=this.buttonsToRestore;for(var d=0;d<f.length;d++){f[d].style.display="inline";Dsq.Utils.deleteNode(Dsq.$(f[d].id+"-loading"))}}};this.postComment=function(d,i,b,a){var h=d?"-"+d:"";var g=Dsq.Templates.getFormFields(d);if(Dsq.Templates.validateFields(d)){if(!Dsq.jsonData.request.is_authenticated&&!b&&((!Dsq.Utils.readCookie("skipped_auth")&&!disqus_skip_auth&&!Dsq.jsonData.forum.disqus_auth_disabled)||!Dsq.jsonData.forum.allow_anon_post)){Dsq.Templates.checkExistingUser(d);return false}var f=[];if(!Dsq.jsonData.request.is_authenticated){f.push(g.name.value,g.email.value,g.website.value);if(a=="login"||a=="register"){f.push({auth_choice:a,username:g.username.value,password:g.password.value,email:g.email.value})}else{f.push(null)}f.push(null,(Dsq.$("dsq-subscribe-on-post"+h).checked?2:0))}else{var e=function(j){var k=Dsq.$("dsq-sharing-"+j+h);return(k!==null&&k.checked===true)?"1":"0"};f.push(null,null,null,null,{tw:e("twitter"),fb:e("facebook"),tr:e("tumblr"),wp:e("wordpress"),mt:e("movabletype"),tp:e("typepad"),yh:e("yahoo")})}var c=Dsq.frames["reply_"+(d?d:0)];c.post.apply(c,f);if(i){Dsq.Templates.setLoadingButton(i,d)}if(b){Dsq.Utils.createCookie("skipped_auth",true)}}else{return false}return true};this.editComment=function(c,a){var b=Dsq.$("dsq-edit-textarea-"+a).value;Dsq.Templates.setLoadingButton(c,a);Dsq.frames["edit_"+a].edit(a,b)};this.toggleEdit=function(b,g){var a=Dsq.$("dsq-comment-body-"+b);var f=Dsq.$("dsq-comment-message-"+b);var e=Dsq.$("dsq-media-embed-"+b);if(!Dsq.Post.stateEditToggled[b]){f.style.display="none";if(e){e.style.display="none"}if(Dsq.$("dsq-edit-"+b)){Dsq.$("dsq-edit-"+b).style.display="block"}else{var c=document.createElement("div");c.id="dsq-edit-"+b;c.className="dsq-edit dsq-textarea";c.innerHTML='<div class="dsq-textarea-wrapper"><textarea class="dsq-edit-textarea" id="dsq-edit-textarea-'+b+'">'+g+'</textarea></div><div class="dsq-save-edit"><button type="button" onclick="Dsq.Templates.editComment(this, '+b+')" class="dsq-button-small">'+Dsq.Strings.get("Save Edit")+'</button></div><div id="dsq-edit-iframe-'+b+'" style="display: none"></div>';a.appendChild(c);if(!Dsq.frames["edit_"+b]){var d=Dsq.jsonData.posts[b];Dsq.frames["edit_"+b]=new Dsq.ReplyFrame(Dsq.$("dsq-edit-iframe-"+b),b);Dsq.frames["edit_"+b].init();Dsq.frames["edit_"+b].setState(b,d.depth)}}}else{f.style.display="block";if(e){e.style.display="block"}Dsq.$("dsq-edit-"+b).style.display="none"}Dsq.Post.stateEditToggled[b]=!Dsq.Post.stateEditToggled[b]};this.edit=function(b,a){Dsq.Utils.execScript(Dsq.Urls.GET_COMMENT_MESSAGE+"?post="+a)};this.toggleReply=function(b,c){if(!this.stateReplyToggled[b]){if(Dsq.$("dsq-reply-post-"+b)){Dsq.$("dsq-append-post-"+b).style.display="block"}else{Dsq.$("dsq-append-post-"+b).innerHTML=Dsq.Templates.postBox(b);var a=Dsq.$("dsq-textarea-wrapper-"+b);if(!Dsq.frames["reply_"+b]&&a){var d=Dsq.jsonData.posts[b];Dsq.frames["reply_"+b]=new Dsq.ReplyFrame(a,b);Dsq.frames["reply_"+b].init(function(){Dsq.$("dsq-append-post-"+b).innerHTML=Dsq.Templates.postBox(b,true);Dsq.$("dsq-form-area-"+b).innerHTML="";var e=(typeof disqus_frame_theme=="undefined")?"default":disqus_frame_theme;Dsq.Iframes.showReplyIframeInContainer(Dsq.$("dsq-form-area-"+b),b,{theme:e})});Dsq.frames["reply_"+b].setState(b,d.depth)}}Dsq.$("dsq-append-post-"+b).className="dsq-append-post";Dsq.$("dsq-comment-footer-reply-"+b).className="dsq-comment-footer-reply-active"}else{Dsq.$("dsq-append-post-"+b).style.display="none";Dsq.$("dsq-append-post-"+b).className="";Dsq.$("dsq-comment-footer-reply-"+b).className="dsq-comment-footer-reply"}this.stateReplyToggled[b]=!this.stateReplyToggled[b];Dsq.Events.fire(Dsq.Events.REPLY_IFRAME_TOGGLED,{postId:b,opened:this.stateReplyToggled[b]})};this.moderateOptions=function(b){var d=Dsq.jsonData.posts[b];var a=Dsq.jsonData.users[d.user_key];if(!Dsq.jsonData.request.is_moderator){return false}var c;c='<div class="dsq-moderate-options"><table>'+(d.email?"<tr><td>Email</td><td>"+d.email+"</td></tr>":"")+(d.ip?"<tr><td>IP address</td><td>"+d.ip+"</td></tr>":"")+"<tr><td>Actions</td><td><ul>"+(Dsq.jsonData.request.moderator_can_edit?'<li><a href="#" onclick="Dsq.Post.edit(this, '+b+'); Dsq.Popup._closePopup(null, true); return false;">'+Dsq.Strings.get("Edit Comment")+"</a></li>":"")+'<li><a href="#" onclick="Dsq.Post.removePost('+b+', 1); Dsq.Popup._closePopup(null, true); return false;">'+Dsq.Strings.get("Delete Comment")+'</a></li><li><a href="#" onclick="Dsq.Post.reportSpam('+b+'); Dsq.Popup._closePopup(null, true); return false;">'+Dsq.Strings.get("Mark Spam")+'</a></li><li><a href="#" onclick="Dsq.Popup.blacklist('+b+'); return false">'+Dsq.Strings.get("Block User")+"</a></li></ul></td></tr></table></div>";c+='<p>Go to the full <a href="'+Dsq.jsonData.settings.disqus_url+"/comments/moderate/"+Dsq.jsonData.forum.url+'" target="_blank">moderate panel</a> for more options.</p>';return Dsq.Popup.popModal(c,Dsq.Strings.get("Moderate Options"),b)};this.placeholder={"class":"dsq-placeholder",name:Dsq.Strings.get("Name"),email:Dsq.Strings.get("Email"),website:Dsq.Strings.get("Website")+" ("+Dsq.Strings.get("Optional").toLowerCase()+")"};this.handlePlaceholder=function(a,d,b){var e=Dsq.Templates.placeholder[b];var c=Dsq.Templates.placeholder["class"];switch(a.type){case"focus":if(d.value==e){d.value="";d.className=""}break;case"blur":if(d.value===""){d.value=e;d.className=c}break;default:break}};this.paginate=function(b,c){var a="";if(typeof disqus_per_page!="undefined"){a+="&per_page="+disqus_per_page}if(typeof disqus_sort!="undefined"){a+="&sort="+disqus_sort}Dsq.$("dsq-pagination").innerHTML+='<img src="'+Dsq.jsonData.settings.media_url+'/images/loading-small.gif">';if(c){Dsq.Templates.setLoadingButton(c)}Dsq.Utils.execScript(Dsq.jsonData.settings.disqus_url+Dsq.Urls.EMBED_THREAD+"?slug="+Dsq.jsonData.thread.slug+"&p="+b+a)};this.rate=function(b,c,a){if(Dsq.jsonData.request.is_authenticated||Dsq.jsonData.forum.allow_anon_votes){if(a==1){Dsq.$("dsq-like-"+c).innerHTML='<img src="'+Dsq.jsonData.settings.media_url+'/images/loading-small.gif">'}Dsq.Utils.execScript(Dsq.jsonData.settings.disqus_url+Dsq.Urls.EMBED_VOTE+"?post_id="+c+"&vote="+a)}else{Dsq.Popup.login(Dsq.Strings.get("To rate, please log in"))}};this.showUserVotes=function(a){Dsq.Utils.execScript(Dsq.jsonData.settings.disqus_url+Dsq.Urls.SHOW_USER_VOTES+"?post_id="+a)};this.voted=function(b,c,a){if(Dsq.$("dsq-like-pts-"+b)){Dsq.$("dsq-like-pts-"+b).innerHTML=" and "+(c-1||1)+" more"}if(a){Dsq.$("dsq-like-"+b).innerHTML=Dsq.Strings.get("You liked this.")+"&nbsp;&nbsp;"}};this.updateSharingLabel=function(c,b){var a=c.id.replace("-"+b,"");a+="-label"+(b?"-"+b:"");Dsq.$(a).checked=(c.checked?"true":"")};this.onPaginate=function(){Dsq.$("dsq-comments-title").innerHTML="<h3>"+Dsq.Templates.commentCount()+"</h3>"};this.postComment_onSuccess=function(b,f,a){var i=b.message.post_meta.approved;if(f){Dsq.Post.toggleReply(f)}Dsq.Popup._closePopup(null,true);if(i){Dsq.Post.incrementPostCount();Dsq.Post.outlineComment(a)}else{var g="Thanks for posting!"+(Dsq.jsonData.request.missing_perm=="verify"?'You must finish verifying your Disqus Profile email address in order for your comment to appear here.<br /><br /><a href="'+Dsq.jsonData.settings.disqus_url+Disqus.Urls.VERIFY_EMAIL+'">'+Dsq.Strings.get("Click here to verify your email address")+"</a>.":Dsq.Strings.get("Your comment must be approved by a moderator before appearing here."));Dsq.Popup.popModal(g,Dsq.Strings.get("Comment awaiting approval"),a,true,"dsq-popup-unapproved")}var c=b.message.sharing_results;var e="";for(var d in c){if(c.hasOwnProperty(d)===true){if(c[d].error===true){e+=d+", "}}}if(c.facebook&&c.facebook.callback){FB.ensureInit(function(){FB.Connect.streamPublish("",c.facebook.attachment)})}if(e!==""){var h=Dsq.Strings.get("Your comment was posted, but there were errors sharing with the following connections:")+" ";h+=e.replace(/,\s$/,"");h+='<p><a href="'+Dsq.jsonData.settings.disqus_url+'/profile/connections" target="_blank">'+Dsq.Strings.get("Configure your connections here")+"</a></p>";Dsq.Popup.popModal(h,Dsq.Strings.get("Sharing options"))}Dsq.Templates.setLoadingButton(false)};this.postComment_onFailure=function(a,c,b){Dsq.Templates.setLoadingButton(false)}};Dsq.Themes.narcissus=new Dsq.Themes.narcissus();